

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.79.0">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>Queen, Princesses, and Workers</title>
    <meta name="author" content="Dimitri Fontaine">
    <meta name="keywords" content="">

    <link rel="icon" href="/favicon.ico">
    

    
    <meta name="description" content="The PostgreSQL community made the explicit choice
some times ago that they would not use the infamous master and slave
terminology. Instead, the documentation introduces the concepts of High
Availability, Load Balancing, and
Replication
with the terms Primary and Standby, and the even more generic term
Replica is used in contexts when only the data flow is considered, rather
than the particular role of a node.">
    <meta property="og:description" content="The PostgreSQL community made the explicit choice
some times ago that they would not use the infamous master and slave
terminology. Instead, the documentation introduces the concepts of High
Availability, Load Balancing, and
Replication
with the terms Primary and Standby, and the even more generic term
Replica is used in contexts when only the data flow is considered, rather
than the particular role of a node.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Queen, Princesses, and Workers">
    <meta property="og:url" content="https://tapoueh.org/blog/2017/12/queen-princesses-and-workers/">
    <meta property="og:site_name" content="The Art of PostgreSQL">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Queen, Princesses, and Workers">
    <meta name="twitter:description" content="The PostgreSQL community made the explicit choice
some times ago that they would not use the infamous master and slave
terminology. Instead, the documentation introduces the concepts of High
Availability, Load Balancing, and
Replication
with the terms Primary and Standby, and the even more generic term
Replica is used in contexts when only the data flow is considered, rather
than the particular role of a node.">
    
      <meta name="twitter:creator" content="@tapoueh">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=640">
    

    
      <meta property="og:image" content="https://tapoueh.org/img/bee-logo.jpg">
    
    
      <meta property="og:image" content="https://tapoueh.org/img/bee.jpg">
    
    

    

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="/css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    
      <link rel="stylesheet" href="https://tapoueh.org/css/dim.css">
    
      <link rel="stylesheet" href="https://tapoueh.org/css/nav.css">
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-47059482-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="navbar-collapse collapse header-title" id="navigation">
    <ul class="nav navbar-nav navbar-right">
      
      <li class="dropdown">
        
        <a style="color: black;" href="/" alt="blog"><i class="sidebar-button-icon fa fa-lg fa-home"></i></a>
        
      </li>
      
      <li class="dropdown">
        
        <a style="color: black;" href="/conf/" alt="talks"><i class="sidebar-button-icon fa fa-lg fa-microphone"></i></a>
        
      </li>
      
      <li class="dropdown">
        
        <a style="color: black;" href="https://twitter.com/tapoueh" alt="Twitter"><i class="sidebar-button-icon fa fa-lg fa-twitter"></i></a>
        
      </li>
      
      <li class="dropdown">
        
        <a style="color: black;" href="http://theartofpostgresql.com" alt="The Art Of PostgreSQL"><i class="sidebar-button-icon fa fa-lg fa-book"></i></a>
        
      </li>
      
    </ul>
  </div>

  
    
      <a class="header-right-icon "
         href="https://theartofpostgresql.com/" target="_blank">
    
    
      <i class="fa fa-lg fa-book"></i>
    
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=110" alt="" />
        </a>
        <h4 class="sidebar-profile-name">Dimitri Fontaine</h4>
        
          <h5 class="sidebar-profile-bio">PostgreSQL Major Contributor</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-pagelines"></i>
      
      <span class="sidebar-button-desc">Blog</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/about/">
    
      <i class="sidebar-button-icon fa fa-lg fa-beer"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories/yesql/">
    
      <i class="sidebar-button-icon fa fa-lg fa-database"></i>
      
      <span class="sidebar-button-desc">YeSQL</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://theartofpostgresql.com" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-book"></i>
      
      <span class="sidebar-button-desc">The Art of PostgreSQL</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/dimitri" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/tapoueh" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-left
              post-header-cover--partial"
       style="background-image:url('/img/bee.jpg')"
       data-behavior="5">
    
      <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Queen, Princesses, and Workers
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2017-12-11T10:19:24&#43;01:00">
        <span style="float: left; width: 35%">
          <i class="fa fa-calendar"></i> 
  
  
  
  
    Monday 11 Dec 2017
  

        </span>
      </time>
    
    <span style="float: right; width: 65%">
      <i class="fa fa-clock-o"></i> 6 mins read
      
    </span>
    <span style="float: left; width: 35%">
      <i class="fa fa-bookmark"></i> 
  
  
    <span></span>
    
      <a class="category-link" href="/categories/postgresql">PostgreSQL</a>
    
  

    </span>
    <div>
      <p>
        
        
        
        
        
        
        <a href="/tags/master/">
          <i class="fa fa-tag"></i> Master
        </a>
        
        
        
        <a href="/tags/slave/">
          <i class="fa fa-tag"></i> Slave
        </a>
        
        
        
        <a href="/tags/high-availability/">
          <i class="fa fa-tag"></i> High-Availability
        </a>
        
        
        
        <a href="/tags/load-balancing/">
          <i class="fa fa-tag"></i> Load Balancing
        </a>
        
        
        
        <a href="/tags/opinion/">
          <i class="fa fa-tag"></i> Opinion
        </a>
        
        
      </p>
    </div>
  </div>


</div>
    
  </div>


      <div id="main" data-behavior="5"
        class="hasCover
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>The <a href="https://postgresql.org">PostgreSQL</a> community made the explicit choice
some times ago that they would not use the infamous <em>master</em> and <em>slave</em>
terminology. Instead, the documentation introduces the concepts of <a href="https://www.postgresql.org/docs/current/static/high-availability.html">High
Availability, Load Balancing, and
Replication</a>
with the terms <em>Primary</em> and <em>Standby</em>, and the even more generic term
<em>Replica</em> is used in contexts when only the data flow is considered, rather
than the particular role of a node.</p>

 




<div class="table-of-contents toc bd-callout">
    
    <h4 class="text-muted">Table of Contents</h4>
    
        
        
            
                
                
                
                    <ul class="toc-h1">
                
                
                
                
                <li>
                  <a href="/blog/2017/12/queen-princesses-and-workers/#multi-nodes-architectures-and-roles">
                    Multi-Nodes Architectures and Roles
                  </a>
                </li>
                
                
                    </ul>
                
            
        
    
        
        
            
                
                
                
                    <ul class="toc-h1">
                
                
                
                
                <li>
                  <a href="/blog/2017/12/queen-princesses-and-workers/#high-availability">
                    High-Availability
                  </a>
                </li>
                
                
                    </ul>
                
            
        
    
        
        
            
                
                
                
                    <ul class="toc-h1">
                
                
                
                
                <li>
                  <a href="/blog/2017/12/queen-princesses-and-workers/#load-balancing">
                    Load-Balancing
                  </a>
                </li>
                
                
                    </ul>
                
            
        
    
        
        
            
                
                
                
                    <ul class="toc-h1">
                
                
                
                
                <li>
                  <a href="/blog/2017/12/queen-princesses-and-workers/#mixed-architectures">
                    Mixed Architectures
                  </a>
                </li>
                
                
                    </ul>
                
            
        
    
        
        
            
                
                
                
                    <ul class="toc-h1">
                
                
                
                
                <li>
                  <a href="/blog/2017/12/queen-princesses-and-workers/#queen-princesses-and-workers">
                    Queen, Princesses, and Workers
                  </a>
                </li>
                
                
                    </ul>
                
            
        
    
        
        
            
                
                
                
                    <ul class="toc-h1">
                
                
                
                
                <li>
                  <a href="/blog/2017/12/queen-princesses-and-workers/#conclusion">
                    Conclusion
                  </a>
                </li>
                
                
                    </ul>
                
            
        
    
</div>



<h2 id="multi-nodes-architectures-and-roles">Multi-Nodes Architectures and Roles</h2>

<p>In current Production Architectures we often have to deal with multi-nodes
systems. It always begins with High-Availability concerns: what if my main
database server gets hit by a meteorite and is then unable to handle any
processing at all?</p>

<p>Also, when dealing with a <em>database server</em>, the availability isn&rsquo;t just
about the service. The data is needed too, otherwise we might have to
declare bankruptcy. So we need a mecanism to have the <strong>data</strong> available at
all times. The only way to ensure that is by implementing <em>online backups</em>
and <em>Point In Time Recovery</em> archiving, when using PostgreSQL. With other
data systems, the terminology might be different, the concepts will be the
same.</p>

<p>Now with backups and <strong>automated recovery</strong> in place, in case when our
primary PostgreSQL server crashes then the plan is simple:</p>

<ol>
<li><p>Get a new PostgreSQL server online.</p></li>

<li><p>Run the automated recovery job on this new server.</p></li>

<li><p>Open the service again.</p></li>
</ol>

<p>The second step here might take quite some time, depending on how much
volume needs to be transfered over the network. While the transfering and
recovering are happening, the service is unavailable…</p>

<h2 id="high-availability">High-Availability</h2>

<p>In order to reduce the maintenance window at the time when we replace the
<em>primary</em> PostgreSQL server, we might want to have a <em>secondary</em> server
ready to serve. When using PostgreSQL, it&rsquo;s as easy as implementing <em>Hot
Standby</em> in between two servers, and <em>promoting the standby</em> in case the
primary server isn&rsquo;t available anymore.</p>

<blockquote>
<p>Do you know why it&rsquo;s called <strong>Hot-Standby</strong>?</p>

<p>That&rsquo;s because not only the standy server is open to read-only queries,
but also at the time when the promotion of the standby to being the new
primary occurs, the read-only queries that are currently running aren&rsquo;t
affected by the promotion.</p>
</blockquote>

<p>So now we have multiple PostgreSQL nodes in production, or a multi-node
architecture, with well defined roles:</p>

<ol>
<li><p>The <em>primary</em> server handles all the traffic.</p></li>

<li><p>The <em>secondary</em> server replays the write-traffic and is ready to take
 over the whole production traffic in case we need to halt the <em>primary</em>.</p></li>

<li><p>We might have more than one <em>secondary</em> server, even in a cascading
 setup. Which is very useful in multi-datacenters setup, or multiple
 Availability Zones cases.</p></li>
</ol>

<p>Now, in this setup, every <em>secondary</em> server accepts read-only queries.</p>

<figure>
    <img src="/img/sr-hs-2s.png"/> 
</figure>


<h2 id="load-balancing">Load-Balancing</h2>

<p>Having several <em>secondary</em> servers up-to-date or lagging less than a second
behind the <em>primary</em> server, it&rsquo;s tempting to use them for the <em>reporting</em>
activities.</p>

<p>One thing leading to another, the <em>secondary</em> servers soon enough receive
quite an important read-only traffic:</p>

<ul>
<li><p>The nightly batches for business reporting (D-1 and the like).</p></li>

<li><p>Those other business exports (for customers, invoicing, finance, etc).</p></li>

<li><p>Some end-user traffic that&rsquo;s know to be read-only.</p></li>
</ul>

<p>And then someday the default for the end-user facing production traffic is
to hit one of the <em>secondary</em> servers. The <em>primary</em> server is left to deal
with only the write traffic, or as close as possible to that.</p>

<blockquote>
<p>Hint: when doing <em>write-then-read</em> within the same end-user activity,
always do that on the same database connection. That&rsquo;s the only proper way
to avoid data inconsistencies where the correctness of your processing
depends on the lag of the secondary systems.</p>
</blockquote>

<h2 id="mixed-architectures">Mixed Architectures</h2>

<p>And our production systems implement a Mixed Architecture, where hopefully
the role of every part of the system is well known, and clearly labeled.
Let&rsquo;s see about that:</p>

<ol>
<li><p>The <em>primary</em> server handles all the writes and is known as the <em>single
 source of truth</em> of the architecture, both by the operators and the
 application code.</p></li>

<li><p>A couple of <em>secondary</em> servers are used to implement High-Availability
 and take over on the <em>primary</em> role when this is needed.</p></li>

<li><p>A bunch of <em>secondary</em> servers are used to implement Load-Balancing and
 serve read-only traffic that comes either from background activities
 (such as mighly batches, exports, and reportings) or directly serving
 user-facing activities.</p></li>
</ol>

<p>Oopsie. I think we have a problem in our choice of terminology now. When
dealing with a <em>secondary</em> server, it could either be a <em>primary redundancy</em>
or a load-balancing node.</p>

<figure>
    <img src="/img/lb-2dc.png"/> 
</figure>


<h2 id="queen-princesses-and-workers">Queen, Princesses, and Workers</h2>

<p>My proposal to clarify the situation is to use a well-known terminology,
taken from the bees. In a bee hive, we can see different roles that are well
defined:</p>

<ul>
<li><p>The <a href="https://en.wikipedia.org/wiki/Queen_bee">Queen Bee</a></p>

<p>In any bee hive, there is a single Queen. Her role is clearly defined
(she serves as the reproducer, and that&rsquo;s it), and only one Bee at a
time in the Hive (or colony) is allowed this role.</p></li>

<li><p>The princess</p>

<p>In the <a href="https://en.wikipedia.org/wiki/Queen_bee">Queen Bee</a> Wikipedia
article, we read:</p>

<blockquote>
<p>As the queen ages her pheromone output diminishes. A queen bee that
becomes old, or is diseased or failing, is replaced by the workers in
a procedure known as &ldquo;supersedure&rdquo;.</p>
</blockquote>

<p>To replace the Queen Bee you need a special kind of bee, raised in a
Queen Cell and fed with Royal Jelly. So when it&rsquo;s time to <em>supersedure</em>
the Queen, the candidates are clearly identified.</p>

<p>In the bee terminology we don&rsquo;t use the term princess. On the other
hand, everyone knows that a Princess is only raised to be a Queen
someday. Not that every Princess is going to have the opportunity, mind
you.</p></li>

<li><p>The <a href="https://en.wikipedia.org/wiki/Worker_bee">Worker Bees</a></p>

<p>Their role is pretty clear: they do all the work that needs to be done
in the hive, except for the role of the Queen, which they assist in
several ways.</p></li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>As a conclusion, I think that the Bee terminology is a better one in for
Multi-Nodes Architectures. The goal of a terminology is dual. First, the
choice of vocabulary will have an impact on how you think about the world
around you, so picking positive and warm-feelings words has an impact.
Second, in mixed architectures, it&rsquo;s important that everybody has a shared
understanding of the role of each server:</p>

<ul>
<li><p>The Queen is the source of truth and handles all the write traffic.</p></li>

<li><p>A Princess is maintained so as to be able to take-over the Queen when
needed, usually when it dies or becomes unable to sustain the workload.</p></li>

<li><p>Workers do everything else.</p></li>
</ul>

<p>Will you use this terminology on your next Architecture diagrams?</p>

<figure>
    <img src="/img/lb-2dc-qpw.png"/> 
</figure>


<p>This terminology makes our understanding and expectations clearer. Now it&rsquo;s
easy for everybody to understand that the <strong>Queen</strong> is expected to be unique
in its role, at any time. That the <strong>Princess</strong> servers are only expected to
be able to take-over within as small a maintenance window as possible, in
case something happens to the Queen. And finally, the <strong>Workers</strong> are
expected to be doing the heavy work.</p>
              
            </div>
          </div>
          <div style="margin-top: 1em;">
 <a href="https://theartofpostgresql.com" alt="The Art of PostgreSQL">
  <img src="/img/taopg-cta.jpg" style="width:90%; height: auto; margin-left: 5%">
 </a>
</div>

          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small"></span><br/>
                    
  <a class="tag tag--primary tag--small" href="/tags/postgresql/">PostgreSQL</a>

  <a class="tag tag--primary tag--small" href="/tags/yesql/">YeSQL</a>

  <a class="tag tag--primary tag--small" href="/tags/master/">Master</a>

  <a class="tag tag--primary tag--small" href="/tags/slave/">Slave</a>

  <a class="tag tag--primary tag--small" href="/tags/high-availability/">High-Availability</a>

  <a class="tag tag--primary tag--small" href="/tags/load-balancing/">Load Balancing</a>

  <a class="tag tag--primary tag--small" href="/tags/opinion/">Opinion</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
 <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2017/12/mastering-postgresql-more-about-the-docker-image/" data-tooltip="Mastering PostgreSQL: more about the docker image">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2017/12/scaling-python-released/" data-tooltip="Scaling Python released">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https%3a%2f%2ftapoueh.org%2fblog%2f2017%2f12%2fqueen-princesses-and-workers%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftapoueh.org%2fblog%2f2017%2f12%2fqueen-princesses-and-workers%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Queen%2c%20Princesses%2c%20and%20Workers with @tapoueh: https%3a%2f%2ftapoueh.org%2fblog%2f2017%2f12%2fqueen-princesses-and-workers%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#table-of-contents">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2021 Dimitri Fontaine. 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
 <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2017/12/mastering-postgresql-more-about-the-docker-image/" data-tooltip="Mastering PostgreSQL: more about the docker image">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2017/12/scaling-python-released/" data-tooltip="Scaling Python released">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https%3a%2f%2ftapoueh.org%2fblog%2f2017%2f12%2fqueen-princesses-and-workers%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftapoueh.org%2fblog%2f2017%2f12%2fqueen-princesses-and-workers%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Queen%2c%20Princesses%2c%20and%20Workers with @tapoueh: https%3a%2f%2ftapoueh.org%2fblog%2f2017%2f12%2fqueen-princesses-and-workers%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#table-of-contents">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3a%2f%2ftapoueh.org%2fblog%2f2017%2f12%2fqueen-princesses-and-workers%2f">
        <i class="fa fa-google-plus"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftapoueh.org%2fblog%2f2017%2f12%2fqueen-princesses-and-workers%2f">
        <i class="fa fa-facebook-official"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Queen%2c%20Princesses%2c%20and%20Workers with @tapoueh: https%3a%2f%2ftapoueh.org%2fblog%2f2017%2f12%2fqueen-princesses-and-workers%2f">
        <i class="fa fa-twitter"></i><span></span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=110" alt="" />
    
    <h4 id="about-card-name">Dimitri Fontaine</h4>
    
      <div id="about-card-bio">PostgreSQL Major Contributor</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Open Source Software Engineer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        France
      </div>
    
  </div>
</div>

    

    
  
    
      
      <div id="cover" style="background-image:url('https://tapoueh.org/images/mayan-calendar.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js"></script>


<script lang="javascript">
window.onload = updateMinWidth;
window.onresize = updateMinWidth;
document.getElementById("sidebar").addEventListener("transitionend", updateMinWidth);
function updateMinWidth() {
  var sidebar = document.getElementById("sidebar");
  var main = document.getElementById("main");
  main.style.minWidth = "";
  var w1 = getComputedStyle(main).getPropertyValue("min-width");
  var w2 = getComputedStyle(sidebar).getPropertyValue("width");
  var w3 = getComputedStyle(sidebar).getPropertyValue("left");
  main.style.minWidth = `calc(${w1} - ${w2} - ${w3})`;
}
</script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/tapoueh.org\/blog\/2017\/12\/queen-princesses-and-workers\/';
          
            this.page.identifier = '\/blog\/2017\/12\/queen-princesses-and-workers\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'tapoueh';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  




    
  </body>
</html>

