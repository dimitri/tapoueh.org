

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.20.7">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>How far is the nearest pub?</title>
    <meta name="author" content="Dimitri Fontaine">
    <meta name="keywords" content="">

    <link rel="icon" href="/favicon.ico">
    

    
    <meta name="description" content="In our recent article
about The Most Popular Pub Names we did
have a look at how to find the pubs nearby, but didn&rsquo;t compute the
distance in between that pub and us. That&rsquo;s because how to compute a
distance given a position on the earth expressed as longitude and
latitude is not that easy. Today, we are going to solve that problem
nonetheless, thanks
to
PostgreSQL Extensions.">
    <meta property="og:description" content="In our recent article
about The Most Popular Pub Names we did
have a look at how to find the pubs nearby, but didn&rsquo;t compute the
distance in between that pub and us. That&rsquo;s because how to compute a
distance given a position on the earth expressed as longitude and
latitude is not that easy. Today, we are going to solve that problem
nonetheless, thanks
to
PostgreSQL Extensions.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="How far is the nearest pub?">
    <meta property="og:url" content="/blog/2013/08/how-far-is-the-nearest-pub/">
    <meta property="og:site_name" content="Dimitri Fontaine, PostgreSQL Expert">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Dimitri Fontaine, PostgreSQL Expert">
    <meta name="twitter:description" content="In our recent article
about The Most Popular Pub Names we did
have a look at how to find the pubs nearby, but didn&rsquo;t compute the
distance in between that pub and us. That&rsquo;s because how to compute a
distance given a position on the earth expressed as longitude and
latitude is not that easy. Today, we are going to solve that problem
nonetheless, thanks
to
PostgreSQL Extensions.">
    
      <meta name="twitter:creator" content="@tapoueh">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=640">
    

    
      <meta property="og:image" content="http://tapoueh.org/img/old/latitude_and_longitude.jpg">
    
    
      <meta property="og:image" content="http://tapoueh.org/img/old/latitude_and_longitude.jpg">
    
    

    

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="/css/style-u6mk0ojoywresbx8iepslrmmhl4stuhrsxuwhkpwrkrx7mryjcaimasnk4pi.min.css" />
    
    
      <link rel="stylesheet" href="http://tapoueh.org//css/dim.css">
    

    
      
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-47059482-1', 'auto');
ga('send', 'pageview');
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="2">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">Dimitri Fontaine, PostgreSQL Expert</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="2">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=110" alt="" />
        </a>
        <h4 class="sidebar-profile-name">Dimitri Fontaine</h4>
        
          <h5 class="sidebar-profile-bio">PostgreSQL Major Contributor</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-pagelines"></i>
      
      <span class="sidebar-button-desc">Blog</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/about/">
    
      <i class="sidebar-button-icon fa fa-lg fa-beer"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories/yesql/">
    
      <i class="sidebar-button-icon fa fa-lg fa-database"></i>
      
      <span class="sidebar-button-desc">YeSQL</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://masteringpostgresql.com" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-book"></i>
      
      <span class="sidebar-button-desc">Mastering PostgreSQL</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/dimitri" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/tapoueh" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-left
              post-header-cover--partial"
       style="background-image:url('/img/old/latitude_and_longitude.jpg')"
       data-behavior="2">
    
      <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      How far is the nearest pub?
    </h1>
  
  <div class="postShorten-meta post-meta">
  
    <time itemprop="datePublished" datetime="2013-08-05T08:11:00&#43;02:00">
      
  
  
  
  
    Monday 05 Aug 2013
  

    </time>
  
  
  
  
    <span></span>
    
      <a class="category-link" href="/categories/postgresql">PostgreSQL</a>, 
    
      <a class="category-link" href="/categories/yesql">YeSQL</a>
    
  


</div>

</div>
    
  </div>


      <div id="main" data-behavior="2"
        class="hasCover
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>In our recent article
about <a href="/blog/2013/08/02-pub-names-knn">The Most Popular Pub Names</a> we did
have a look at how to find the pubs nearby, but didn&rsquo;t compute the
<strong>distance</strong> in between that pub and us. That&rsquo;s because how to compute a
distance given a position on the earth expressed as <em>longitude</em> and
<em>latitude</em> is not that easy. Today, we are going to solve that problem
nonetheless, thanks
to
<a href="http://www.postgresql.org/docs/9.2/interactive/extend-extensions.html">PostgreSQL Extensions</a>.</p>

<p>
<h1 id="table-of-contents"></h1><nav id="TableOfContents">
<ul>
<li><a href="#the-earthdistance-postgresql-contrib">The earthdistance PostgreSQL contrib</a></li>
<li><a href="#pubs-and-cities">Pubs and cities</a></li>
<li><a href="#the-most-popular-pub-names-per-city">The Most Popular Pub Names, per City</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</nav></p>

<h1 id="the-earthdistance-postgresql-contrib">The earthdistance PostgreSQL contrib</h1>

<p>As the maths are complex enough to easily make mistakes when implementing
them again, we want to find an existing implementation that&rsquo;s been tested
already. PostgreSQL provides
several <a href="http://www.postgresql.org/docs/9.2/static/contrib.html">contrib</a>
extensions, one of those is
named
<a href="http://www.postgresql.org/docs/9.2/static/earthdistance.html">earthdistance</a> and
is made to solve our problem. Time to try it!</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span># <span style="color: #0000aa">create</span> extension <span style="color: #0000aa">cube</span>;
# <span style="color: #0000aa">create</span> extension earthdistance;
</pre></div>

<p>Equiped with that extension we can now use its <code>&lt;@&gt;</code> operator and compute a
distance in miles at the surface of the earth, given points as <em>(longitude,
latitude)</em>. So I had to import our data set again with points in the right
representation, then I could run this query:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>&gt;  <span style="color: #0000aa">select</span> id, name, pos,
          round((pos &lt;@&gt; point(-<span style="color: #009999">0</span>.<span style="color: #009999">12</span>,<span style="color: #009999">51</span>.<span style="color: #009999">516</span>))::<span style="color: #00aaaa">numeric</span>, <span style="color: #009999">3</span>) <span style="color: #0000aa">as</span> miles
     <span style="color: #0000aa">from</span> pubnames
 <span style="color: #0000aa">order</span> <span style="color: #0000aa">by</span> pos &lt;-&gt; point(-<span style="color: #009999">0</span>.<span style="color: #009999">12</span>,<span style="color: #009999">51</span>.<span style="color: #009999">516</span>)
    <span style="color: #0000aa">limit</span> <span style="color: #009999">10</span>;
</pre></div>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>     id     |          <span style="color: #0000aa">name</span>          |           pos           | miles 
<span style="color: #aaaaaa; font-style: italic">------------+------------------------+-------------------------+-------</span>
   <span style="color: #009999">21593238</span> | <span style="color: #0000aa">All</span> Bar One            | (-<span style="color: #009999">0.1192746</span>,<span style="color: #009999">51.5163499</span>) | <span style="color: #009999">0.039</span>
   <span style="color: #009999">26848690</span> | The Shakespeare<span style="color: #aa5500">&#39;s Head | (-0.1194731,51.5167871) | 0.059</span>
<span style="color: #aa5500">  371049718 | The Newton Arms        | (-0.1209811,51.5163032) | 0.047</span>
<span style="color: #aa5500">  438488621 | Marquis Cornwallis     | (-0.1199612,51.5146691) | 0.092</span>
<span style="color: #aa5500">   21593236 | Ship Tavern            | (-0.1192378,51.5172525) | 0.093</span>
<span style="color: #aa5500">  312156665 | The Prince of Wales    | (-0.121732,51.5145794)  | 0.123</span>
<span style="color: #aa5500">  312156722 | O&#39;</span>Neills               | (-<span style="color: #009999">0.1220195</span>,<span style="color: #009999">51.5149538</span>) | <span style="color: #009999">0.113</span>
   <span style="color: #009999">25508632</span> | Friend <span style="color: #0000aa">at</span> Hand         | (-<span style="color: #009999">0.1224717</span>,<span style="color: #009999">51.5148694</span>) | <span style="color: #009999">0.132</span>
  <span style="color: #009999">338507304</span> | The Square Pig         | (-<span style="color: #009999">0.1191744</span>,<span style="color: #009999">51.5187089</span>) | <span style="color: #009999">0.191</span>
 <span style="color: #009999">1975855516</span> | Holborn Whippet        | (-<span style="color: #009999">0.1216925</span>,<span style="color: #009999">51.5185189</span>) | <span style="color: #009999">0.189</span>
(<span style="color: #009999">10</span> <span style="color: #0000aa">rows</span>)

<span style="color: #00aaaa">Time</span>: <span style="color: #009999">1.335</span> ms
</pre></div>

<p>So the nearest pub is <em>All Bar One</em>, 0.039 miles away, or 68.64 yards
apparently. And we can see that adding the computation to get the distance
in <em>miles</em> didn&rsquo;t add that much to the query timing.</p>

<h1 id="pubs-and-cities">Pubs and cities</h1>

<p>Just as easily as we have
<em>nearest</em> pubs we can also of course query for pubs
<em>farthest</em> away from any location.</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>&gt;   <span style="color: #0000aa">select</span> name, round((pos &lt;@&gt; point(-<span style="color: #009999">0</span>.<span style="color: #009999">12</span>,<span style="color: #009999">51</span>.<span style="color: #009999">516</span>))::<span style="color: #00aaaa">numeric</span>, <span style="color: #009999">3</span>) <span style="color: #0000aa">as</span> miles
      <span style="color: #0000aa">from</span> pubnames
  <span style="color: #0000aa">order</span> <span style="color: #0000aa">by</span> pos &lt;-&gt; point(-<span style="color: #009999">0</span>.<span style="color: #009999">12</span>,<span style="color: #009999">51</span>.<span style="color: #009999">516</span>) <span style="color: #0000aa">desc</span>
     <span style="color: #0000aa">limit</span> <span style="color: #009999">5</span>;
</pre></div>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>      <span style="color: #0000aa">name</span>       |  miles  
<span style="color: #aaaaaa; font-style: italic">-----------------+---------</span>
 Tig Bhric       | <span style="color: #009999">440.194</span>
 TP<span style="color: #aa5500">&#39;s            | 439.779</span>
<span style="color: #aa5500"> Begley&#39;</span>s        | <span style="color: #009999">439.752</span>
 Ventry Inn      | <span style="color: #009999">438.962</span>
 Fisherman<span style="color: #aa5500">&#39;s Bar | 439.153</span>
<span style="color: #aa5500">(5 rows)</span>

<span style="color: #aa5500">Time: 74.780 ms</span>
</pre></div>

<p>Now we want to know what city are those pubs in right? With the following
URL and using the <a href="http://www.openstreetmap.org/">Open Street Map</a> APIs,
I&rsquo;ve been able to download a list of cities in the same area as where the
pub names were fetched in:
<code>http://www.overpass-api.de/api/xapi?*[place=city][bbox=-10.5,49.78,1.78,59]</code>.</p>

<p>Tweaking the parser and import code
at
<a href="https://github.com/dimitri/pubnames">https://github.com/dimitri/pubnames</a>
was easy, and allowed to import those city names and locations in <em>0.087
seconds of real time</em>, with the following schema:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span># <span style="color: #0000aa">create</span> <span style="color: #0000aa">table</span> <span style="color: #0000aa">if</span> <span style="color: #0000aa">not</span> <span style="color: #0000aa">exists</span> cities (id <span style="color: #00aaaa">bigint</span>, pos point, name <span style="color: #00aaaa">text</span>);
# <span style="color: #0000aa">create</span> <span style="color: #0000aa">index</span> <span style="color: #0000aa">on</span> cities <span style="color: #0000aa">using</span> gist(pos);
</pre></div>

<p>Now let&rsquo;s see where are those far away pubs:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>&gt;   <span style="color: #0000aa">select</span> name,
          (<span style="color: #0000aa">select</span> name <span style="color: #0000aa">from</span> cities <span style="color: #0000aa">c</span> <span style="color: #0000aa">order</span> <span style="color: #0000aa">by</span> <span style="color: #0000aa">c</span>.pos &lt;-&gt; p.pos <span style="color: #0000aa">limit</span> <span style="color: #009999">1</span>) <span style="color: #0000aa">as</span> city,
          round((pos &lt;@&gt; point(-<span style="color: #009999">0</span>.<span style="color: #009999">12</span>,<span style="color: #009999">51</span>.<span style="color: #009999">516</span>))::<span style="color: #00aaaa">numeric</span>, <span style="color: #009999">3</span>) <span style="color: #0000aa">as</span> miles
     <span style="color: #0000aa">from</span> pubnames p
 <span style="color: #0000aa">order</span> <span style="color: #0000aa">by</span> pos &lt;-&gt; point(-<span style="color: #009999">0</span>.<span style="color: #009999">12</span>,<span style="color: #009999">51</span>.<span style="color: #009999">516</span>) <span style="color: #0000aa">desc</span>
    <span style="color: #0000aa">limit</span> <span style="color: #009999">5</span>;
</pre></div>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>      <span style="color: #0000aa">name</span>       |  city  |  miles  
<span style="color: #aaaaaa; font-style: italic">-----------------+--------+---------</span>
 Tig Bhric       | Galway | <span style="color: #009999">440.194</span>
 TP<span style="color: #aa5500">&#39;s            | Galway | 439.779</span>
<span style="color: #aa5500"> Begley&#39;</span>s        | Galway | <span style="color: #009999">439.752</span>
 Ventry Inn      | Galway | <span style="color: #009999">438.962</span>
 Fisherman<span style="color: #aa5500">&#39;s Bar | Cork   | 439.153</span>
<span style="color: #aa5500">(5 rows)</span>

<span style="color: #aa5500">Time: 686.444 ms</span>
</pre></div>

<p>As you can see we are fetching the pubs at a distance from our given point
and then the nearest city from where the pub is. The way it&rsquo;s implemented
here is called a <em>correlated subquery</em>, and starting with 9.3 we will be
able to use
the
<a href="http://www.postgresql.org/docs/devel/static/queries-table-expressions.html#QUERIES-LATERAL">LATERAL</a> standard
join construct, as in the following example:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>&gt;   <span style="color: #0000aa">select</span> <span style="color: #0000aa">c</span>.name <span style="color: #0000aa">as</span> city, p.name,
           round((pos &lt;@&gt; point(-<span style="color: #009999">0</span>.<span style="color: #009999">12</span>,<span style="color: #009999">51</span>.<span style="color: #009999">516</span>))::<span style="color: #00aaaa">numeric</span>, <span style="color: #009999">3</span>) <span style="color: #0000aa">as</span> miles
      <span style="color: #0000aa">from</span> pubnames p,
           <span style="color: #0000aa">lateral</span> (<span style="color: #0000aa">select</span> name
                      <span style="color: #0000aa">from</span> cities <span style="color: #0000aa">c</span>
                  <span style="color: #0000aa">order</span> <span style="color: #0000aa">by</span> <span style="color: #0000aa">c</span>.pos &lt;-&gt; p.pos
                     <span style="color: #0000aa">limit</span> <span style="color: #009999">1</span>) <span style="color: #0000aa">c</span>
  <span style="color: #0000aa">order</span> <span style="color: #0000aa">by</span> pos &lt;-&gt; point(-<span style="color: #009999">0</span>.<span style="color: #009999">12</span>,<span style="color: #009999">51</span>.<span style="color: #009999">516</span>) <span style="color: #0000aa">desc</span>
     <span style="color: #0000aa">limit</span> <span style="color: #009999">5</span>;
</pre></div>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>  city  |      <span style="color: #0000aa">name</span>       |  miles  
<span style="color: #aaaaaa; font-style: italic">--------+-----------------+---------</span>
 Galway | Tig Bhric       | <span style="color: #009999">440.194</span>
 Galway | TP<span style="color: #aa5500">&#39;s            | 439.779</span>
<span style="color: #aa5500"> Galway | Begley&#39;</span>s        | <span style="color: #009999">439.752</span>
 Galway | Ventry Inn      | <span style="color: #009999">438.962</span>
 Cork   | Fisherman<span style="color: #aa5500">&#39;s Bar | 439.153</span>
<span style="color: #aa5500">(5 rows)</span>

<span style="color: #aa5500">Time: 636.445 ms</span>
</pre></div>

<p>So apparently the <em>bounded box</em> that we&rsquo;ve been given (
<code>[bbox=-10.5,49.78,1.78,59]</code>) includes Ireland too&hellip; and more importantly
the query execution penalty is quite important. That&rsquo;s because the planner
only know how to solve that query by doing <code>Index Scan using cities_pos_idx
on public.cities c (cost=0.14..9.60 rows=73 width=25) (actual
time=0.016..0.016 rows=1 loops=27878)</code>, which means scanning the position
index of the cities 27878 times (once per pubnames entry).</p>

<p>It&rsquo;s possible to force the planner into doing it the obvious way though:</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>&gt;   <span style="color: #0000aa">with</span> pubs <span style="color: #0000aa">as</span> (
        <span style="color: #0000aa">select</span> name, pos,
               round((pos &lt;@&gt; point(-<span style="color: #009999">0</span>.<span style="color: #009999">12</span>,<span style="color: #009999">51</span>.<span style="color: #009999">516</span>))::<span style="color: #00aaaa">numeric</span>, <span style="color: #009999">3</span>) <span style="color: #0000aa">as</span> miles
          <span style="color: #0000aa">from</span> pubnames
      <span style="color: #0000aa">order</span> <span style="color: #0000aa">by</span> pos &lt;-&gt; point(-<span style="color: #009999">0</span>.<span style="color: #009999">12</span>,<span style="color: #009999">51</span>.<span style="color: #009999">516</span>) <span style="color: #0000aa">desc</span>
         <span style="color: #0000aa">limit</span> <span style="color: #009999">5</span>
    )
    <span style="color: #0000aa">select</span> <span style="color: #0000aa">c</span>.name <span style="color: #0000aa">as</span> city, p.name, p.miles
      <span style="color: #0000aa">from</span> pubs p, <span style="color: #0000aa">lateral</span> (<span style="color: #0000aa">select</span> name
                              <span style="color: #0000aa">from</span> cities <span style="color: #0000aa">c</span>
                          <span style="color: #0000aa">order</span> <span style="color: #0000aa">by</span> <span style="color: #0000aa">c</span>.pos &lt;-&gt; p.pos
                             <span style="color: #0000aa">limit</span> <span style="color: #009999">1</span>) <span style="color: #0000aa">c</span>;
</pre></div>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>  city  |      <span style="color: #0000aa">name</span>       |  miles  
<span style="color: #aaaaaa; font-style: italic">--------+-----------------+---------</span>
 Galway | Tig Bhric       | <span style="color: #009999">440.194</span>
 Galway | TP<span style="color: #aa5500">&#39;s            | 439.779</span>
<span style="color: #aa5500"> Galway | Begley&#39;</span>s        | <span style="color: #009999">439.752</span>
 Galway | Ventry Inn      | <span style="color: #009999">438.962</span>
 Cork   | Fisherman<span style="color: #aa5500">&#39;s Bar | 439.153</span>
<span style="color: #aa5500">(5 rows)</span>

<span style="color: #aa5500">Time: 76.467 ms</span>
</pre></div>

<h1 id="the-most-popular-pub-names-per-city">The Most Popular Pub Names, per City</h1>

<p>Let&rsquo;s now find which cities have the highest count of pubs, considering that
a pub is affiliated to a city if it&rsquo;s within 5 miles of the single point we
have as city location in our data set.</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>&gt;   <span style="color: #0000aa">select</span> <span style="color: #0000aa">c</span>.name, <span style="color: #0000aa">count</span>(cp)
      <span style="color: #0000aa">from</span> cities <span style="color: #0000aa">c</span>,
           <span style="color: #0000aa">lateral</span> (<span style="color: #0000aa">select</span> name
                      <span style="color: #0000aa">from</span> pubnames p
                     <span style="color: #0000aa">where</span> (p.pos &lt;@&gt; <span style="color: #0000aa">c</span>.pos) &lt; <span style="color: #009999">5</span>
                   )
                   <span style="color: #0000aa">as</span> cp
  <span style="color: #0000aa">group</span> <span style="color: #0000aa">by</span> <span style="color: #0000aa">c</span>.name
  <span style="color: #0000aa">order</span> <span style="color: #0000aa">by</span> <span style="color: #0000aa">count</span>(cp) <span style="color: #0000aa">desc</span>
  <span style="color: #0000aa">limit</span> <span style="color: #009999">10</span>;
</pre></div>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>    <span style="color: #0000aa">name</span>     | count 
<span style="color: #aaaaaa; font-style: italic">-------------+-------</span>
 London      |  <span style="color: #009999">1388</span>
 Westminster |  <span style="color: #009999">1383</span>
 Dublin      |   <span style="color: #009999">402</span>
 Manchester  |   <span style="color: #009999">306</span>
 Bristol     |   <span style="color: #009999">292</span>
 Leeds       |   <span style="color: #009999">292</span>
 Edinburgh   |   <span style="color: #009999">286</span>
 Liverpool   |   <span style="color: #009999">258</span>
 Nottingham  |   <span style="color: #009999">218</span>
 Glasgow     |   <span style="color: #009999">217</span>
(<span style="color: #009999">10</span> <span style="color: #0000aa">rows</span>)

<span style="color: #00aaaa">Time</span>: <span style="color: #009999">562.678</span> ms
</pre></div>

<p>If we look at a map we see that <em>Westminster</em> is in fact within <em>London</em>
given our arbitrary rule of <em>within 5 miles</em>, so in the next query we will
simply filter it out. Exercise left to the reader: write a query allowing to
remove from London&rsquo;s count the pubs that are actually in Westminster (when
within 1 mile of the location we have for it). Then extend that query to
address any other situation like that in the whole data set.</p>

<p>And now what about the most popular pub names per city? Of course we want to
normalize again our pub names here but only for counting: we still display
all the names we did count.</p>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>&gt;   <span style="color: #0000aa">select</span> <span style="color: #0000aa">c</span>.name,
           array_to_string(array_agg(<span style="color: #0000aa">distinct</span>(cp.name) <span style="color: #0000aa">order</span> <span style="color: #0000aa">by</span> cp.name), <span style="color: #aa5500">&#39;, &#39;</span>),
           <span style="color: #0000aa">count</span>(*)
      <span style="color: #0000aa">from</span> cities <span style="color: #0000aa">c</span>,
           <span style="color: #0000aa">lateral</span> (<span style="color: #0000aa">select</span> name
                      <span style="color: #0000aa">from</span> pubnames p
                     <span style="color: #0000aa">where</span> (p.pos &lt;@&gt; <span style="color: #0000aa">c</span>.pos) &lt; <span style="color: #009999">5</span>) <span style="color: #0000aa">as</span> cp
     <span style="color: #0000aa">where</span> <span style="color: #0000aa">c</span>.name &lt;&gt; <span style="color: #aa5500">&#39;Westminster&#39;</span>
  <span style="color: #0000aa">group</span> <span style="color: #0000aa">by</span> <span style="color: #0000aa">c</span>.name, <span style="color: #0000aa">replace</span>(<span style="color: #0000aa">replace</span>(cp.name, <span style="color: #aa5500">&#39;The &#39;</span>, <span style="color: #aa5500">&#39;&#39;</span>), <span style="color: #aa5500">&#39;And&#39;</span>, <span style="color: #aa5500">&#39;&amp;&#39;</span>)
  <span style="color: #0000aa">order</span> <span style="color: #0000aa">by</span> <span style="color: #0000aa">count</span>(*) <span style="color: #0000aa">desc</span>
     <span style="color: #0000aa">limit</span> <span style="color: #009999">10</span>;
</pre></div>
<div class="highlight" style="background: #ffffff"><pre style="line-height: 125%"><span></span>   <span style="color: #0000aa">name</span>   |            array_to_string             | count 
<span style="color: #aaaaaa; font-style: italic">----------+----------------------------------------+-------</span>
 London   | Prince <span style="color: #0000aa">of</span> Wales, The Prince <span style="color: #0000aa">of</span> Wales   |    <span style="color: #009999">15</span>
 London   | <span style="color: #0000aa">All</span> Bar One                            |    <span style="color: #009999">12</span>
 London   | The Beehive                            |     <span style="color: #009999">8</span>
 London   | O<span style="color: #aa5500">&#39;Neills                               |     7</span>
<span style="color: #aa5500"> London   | The Crown                              |     7</span>
<span style="color: #aa5500"> London   | The Windmill                           |     7</span>
<span style="color: #aa5500"> London   | Red Lion, The Red Lion                 |     6</span>
<span style="color: #aa5500"> Bradford | New Inn, The New Inn                   |     6</span>
<span style="color: #aa5500"> London   | Coach and Horses, The Coach and Horses |     6</span>
<span style="color: #aa5500"> London   | The White Horse, White Horse           |     6</span>
<span style="color: #aa5500">(10 rows)</span>

<span style="color: #aa5500">Time: 729.866 ms</span>
</pre></div>

<h1 id="conclusion">Conclusion</h1>




<div class="figure fig25 right dim-margin" >
  
    <img class="fig-img" src="/img/sql-logo.png"  alt="Often the most powerful tool you have to make sense of your data...">
  
   
    <span class="caption">Often the most powerful tool you have to make sense of your data...</span>
  
</div>


<p>As said in the previous article on the same theme, SQL when using
<a href="http://www.postgresql.org/">PostgreSQL</a>
is indeed quite powerful! We&rsquo;ve been able to easily add an implementation of
the earth distance computation from
<em>longitude</em> and
<em>latitude</em> as found in the
<a href="http://www.postgresql.org/docs/9.2/static/earthdistance.html">earthdistance</a> contrib extension (already packaged for your Operating System
of choice, be sure to install
<em>contribs</em> by default), then to use it to solve
some interesting problems with our data set.</p>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small"></span><br/>
                    
  <a class="tag tag--primary tag--small" href="http://tapoueh.org//tags/postgresql/">PostgreSQL</a>

  <a class="tag tag--primary tag--small" href="http://tapoueh.org//tags/extensions/">Extensions</a>

  <a class="tag tag--primary tag--small" href="http://tapoueh.org//tags/earthdistance/">earthdistance</a>

  <a class="tag tag--primary tag--small" href="http://tapoueh.org//tags/yesql/">YeSQL</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  <div class="post-footer-tags">
    <script async id="_ck_218061" src="https://forms.convertkit.com/218061?v=6"></script>
  </div>
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2013/08/migrating-from-mysql-to-postgresql/" data-tooltip="Migrating from MySQL to PostgreSQL">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2013/08/the-most-popular-pub-names/" data-tooltip="The Most Popular Pub Names">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f08%2fhow-far-is-the-nearest-pub%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f08%2fhow-far-is-the-nearest-pub%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=How%20far%20is%20the%20nearest%20pub%3f with @tapoueh: http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f08%2fhow-far-is-the-nearest-pub%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#table-of-contents">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2017 Dimitri Fontaine. 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
        <div class="post-actions-wrap">
  <div class="post-footer-tags">
    <script async id="_ck_218061" src="https://forms.convertkit.com/218061?v=6"></script>
  </div>
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2013/08/migrating-from-mysql-to-postgresql/" data-tooltip="Migrating from MySQL to PostgreSQL">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2013/08/the-most-popular-pub-names/" data-tooltip="The Most Popular Pub Names">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f08%2fhow-far-is-the-nearest-pub%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f08%2fhow-far-is-the-nearest-pub%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=How%20far%20is%20the%20nearest%20pub%3f with @tapoueh: http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f08%2fhow-far-is-the-nearest-pub%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#table-of-contents">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="2">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f08%2fhow-far-is-the-nearest-pub%2f">
        <i class="fa fa-google-plus"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f08%2fhow-far-is-the-nearest-pub%2f">
        <i class="fa fa-facebook-official"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=How%20far%20is%20the%20nearest%20pub%3f with @tapoueh: http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f08%2fhow-far-is-the-nearest-pub%2f">
        <i class="fa fa-twitter"></i><span></span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=110" alt="" />
    
    <h4 id="about-card-name">Dimitri Fontaine</h4>
    
      <div id="about-card-bio">PostgreSQL Major Contributor</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Open Source Software Engineer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        France
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center"></div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2017/07/from-mysql-to-postgresql/">
                <h3 class="media-heading">from MySQL to PostgreSQL</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Today
<a href="https://github.com/dimitri/pgloader/releases/tag/v3.4.1">pgloader v3.4.1</a>
is released and available! This new release comes with 110 commits as show
in
<a href="https://github.com/dimitri/pgloader/compare/v3.3.2...v3.4.1">github compare view</a>.</p>

<p>This release of <a href="http://pgloader.io">pgloader</a> is following the tradition of
simplifying things for users, or if you allow me to
quote <a href="https://en.wikiquote.org/wiki/Alan_Kay">Alan Key</a>, I believe that if
<em>simple things should be simple, complex things should be possible.</em></p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2017/07/playing-with-unicode/">
                <h3 class="media-heading">Playing with Unicode</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>The reason why I like Unicode a lot is because it allows me to code in text
based environments and still have nice output. Today, we&rsquo;re going to play
with
<a href="https://en.wikipedia.org/wiki/Regional_Indicator_Symbol">Regional Indicator Symbol</a>,
which is implemented as a Unicode combinaison of letters from 🇦 to 🇿. For
instance, if you display 🇫 then 🇷 concatenated together, you get 🇫🇷. Let&rsquo;s
try that from our <a href="https://www.postgresql.org/">PostgreSQL</a> prompt!</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2017/06/postgresql-and-the-calendar/">
                <h3 class="media-heading">PostgreSQL and the calendar</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>The modern calendar is a trap for the young engineer&rsquo;s mind. We deal with
the calendar on a daily basis and until exposed to its insanity it&rsquo;s rather
common to think that calendar based computations are easy. That&rsquo;s until
you&rsquo;ve tried to do it once. A very good read about how the current calendar
came to be the way it is now is Erik&rsquo;s
Naggum <a href="http://naggum.no/lugm-time.html">The Long, Painful History of Time</a>.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2017/06/sql-and-business-logic/">
                <h3 class="media-heading">SQL and Business Logic</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Business logic is <em>supposed to be</em> the part of the application where you
deal with customer or user facing decisions and computations. It is often
argued that this part should be well separated from the rest of the
technical infrastructure of your code. Of course, SQL and relational
database design is meant to support your business cases (or user stories),
so then we can ask ourselves if SQL should be part of your business logic
implementation. Or actually, how much of your business logic should be SQL?</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2017/06/exploring-a-data-set-in-sql/">
                <h3 class="media-heading">Exploring a Data Set in SQL</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Sometimes you need to dive in an existing data set that you know very little
about. Let&rsquo;s say we&rsquo;ve been lucky to have had a high level description of
the business case covered by a database, and then access to it. Our next
step is figuring out data organisation, content and quality. Our tool box:
<em>the world&rsquo;s most advanced open source
database</em>, <a href="https://www.postgresql.org">PostgreSQL</a>, and its <em>Structured
Query Language</em>, SQL.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2017/06/how-to-write-sql/">
                <h3 class="media-heading">How to Write SQL</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p><a href="https://twitter.com/krisajenkins">Kris Jenkins</a> cooked up a very nice way
to embed SQL in your
code: <a href="https://github.com/krisajenkins/yesql">YeSQL for Clojure</a>. The main
idea is that you should be writing your SQL queries in <code>.sql</code> files in your
code repository and maintain them there.</p>

<p>The idea is very good and it is now possible to find alternative
implementations of the <a href="https://clojure.org">Clojure</a> <em>yesql</em> library in
other languages. Today, we are going to have a look at one of them for
the <a href="https://www.python.org">python</a> programming
language: <a href="https://github.com/honza/anosql">anosql</a>.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2017/05/find-the-missing-integer/">
                <h3 class="media-heading">Find The Missing Integer</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2017
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>A recent interview question that I had to review was spelled like this:</p>

<blockquote>
<p>Find missing int element into array 1..100</p>
</blockquote>

<p>Of course at first read I got it wrong, you have only one integer to look
for into the array. So while the obvious idea was to apply classic <em>sorting</em>
techniques and minimize array traversal to handle complexity (time and
space), it turns out there&rsquo;s a much simpler way to do it if you remember
your math lessons from younger. But is it that much simpler?</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2016/04/pgconf-us-2016/">
                <h3 class="media-heading">PGConf US 2016</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2016
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p><a href="https://www.pgconf.us/conferences/2016">PostgreSQL Conference US</a> took
place in New York City and I had the pleasure to be a speaker there. I
presented there a talk about why <em>You’d Better Have Tested Backups</em>. The
important bit is that backups are not interesting, recoveries are. Also the
only way to make sure a backup is successful is to be able to use it for
recovery.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2015/11/all-your-base-conference-2015/">
                <h3 class="media-heading">All Your Base Conference 2015</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>I had the pleasure to be invited to speak at
<a href="http://allyourbaseconf.com/2015/speakers#dimitri-fontaine">All Your Base Conference 2015</a>
about
<a href="http://www.postgresql.org">PostgreSQL</a> (of course). The conference gathers together lots of user
experience around data management and database products, either in the now
classic meaning of the word (I mean
<em>relational database management systems
here</em>) or the newer set of trade-offs represented by the NoSQL set of tools.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2015/05/postgresql-au-jug-de-montpellier/">
                <h3 class="media-heading">PostgreSQL au JUG de Montpellier</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><div class="figure fig25 left dim-margin" >
  
    <img class="fig-img" src="/img/old/jug-montpellier-logo.png" >
  
  
</div>


<p>J&rsquo;ai eu le plaisir de présenter PostgreSQL au
<a href="http://www.jug-montpellier.org/">Java User Group de Montpellier</a>
le 20 mai dernier dans le cadre d&rsquo;une soirée
<a href="http://www.jug-montpellier.org/event/36">PostgreSQL is YeSQL</a>. L&rsquo;accueil
réservé par le
<em>JUG</em> a été parfait et je tiens à les remercier pour une très
bonne soirée de partage et d&rsquo;échanges autour de PostgreSQL.</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero=""
         data-message-one=""
         data-message-other="">
         237 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('http://tapoueh.org/images/mayan-calendar.jpg');"></div>
  


    
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.js"></script>


<script src="/js/script-wl33z0n6ocaypepiqrazthtivfrliqijej4rq8ek8gvrv1awftmgjuv8k4zc.min.js"></script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight').each(function(i, block) {
    var code = "";
    hljs.highlightAuto(block.innerText).value.split(/\r\n|\r|\n/).forEach(function(line) {
      code += "<span class=\"line\">" + line + "</span><br>";
    });
    if (code.length > 0) {
      block.innerHTML = code;  
    }
  });
  $('pre > code').each(function(i, block) {
    $(this).addClass('codeblock');
    hljs.highlightBlock(block);
  });
});
</script>

  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'http:\/\/tapoueh.org\/blog\/2013\/08\/how-far-is-the-nearest-pub\/';
          
            this.page.identifier = '\/blog\/2013\/08\/how-far-is-the-nearest-pub\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'tapoueh';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  





    
  </body>
</html>

