

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.20.7">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>Denormalizing Tags</title>
    <meta name="author" content="Dimitri Fontaine">
    <meta name="keywords" content="">

    <link rel="icon" href="/favicon.ico">
    

    
    <meta name="description" content="In our Tour of Extensions today&rsquo;s article is about advanced tag indexing. We have a great data collection to play with and our goal today is to be able to quickly find data matching a complex set of tags. So, let&rsquo;s find out those lastfm tracks that are tagged as blues and rhythm and blues, for instance.
In this article, we&rsquo;re going to play with music related tags
We&rsquo;re going to use the Last.">
    <meta property="og:description" content="In our Tour of Extensions today&rsquo;s article is about advanced tag indexing. We have a great data collection to play with and our goal today is to be able to quickly find data matching a complex set of tags. So, let&rsquo;s find out those lastfm tracks that are tagged as blues and rhythm and blues, for instance.
In this article, we&rsquo;re going to play with music related tags
We&rsquo;re going to use the Last.">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Denormalizing Tags">
    <meta property="og:url" content="/blog/2013/10/denormalizing-tags/">
    <meta property="og:site_name" content="Dimitri Fontaine, Expert PostgreSQL">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Dimitri Fontaine, Expert PostgreSQL">
    <meta name="twitter:description" content="In our Tour of Extensions today&rsquo;s article is about advanced tag indexing. We have a great data collection to play with and our goal today is to be able to quickly find data matching a complex set of tags. So, let&rsquo;s find out those lastfm tracks that are tagged as blues and rhythm and blues, for instance.
In this article, we&rsquo;re going to play with music related tags
We&rsquo;re going to use the Last.">
    
      <meta name="twitter:creator" content="@tapoueh">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=640">
    

    
      <meta property="og:image" content="http://tapoueh.org/img/old/wordpres-seo-categories-tags.jpg">
    
    
      <meta property="og:image" content="http://tapoueh.org/img/old/wordpres-seo-categories-tags.jpg">
    
    

    

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="/css/style-u6mk0ojoywresbx8iepslrmmhl4stuhrsxuwhkpwrkrx7mryjcaimasnk4pi.min.css" />
    
    
      <link rel="stylesheet" href="http://tapoueh.org//css/dim.css">
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="1">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="/">Dimitri Fontaine, Expert PostgreSQL</a>
  </div>
  
</header>

      <nav id="sidebar" data-behavior="1">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=110" alt="" />
        </a>
        <h4 class="sidebar-profile-name">Dimitri Fontaine</h4>
        
          <h5 class="sidebar-profile-bio">PostgreSQL Major Contributor</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-pagelines"></i>
      
      <span class="sidebar-button-desc">Blog</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/about/">
    
      <i class="sidebar-button-icon fa fa-lg fa-beer"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/book/">
    
      <i class="sidebar-button-icon fa fa-lg fa-book"></i>
      
      <span class="sidebar-button-desc">Book</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/tags/conferences/">
    
      <i class="sidebar-button-icon fa fa-lg fa-plane"></i>
      
      <span class="sidebar-button-desc">Conferences</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/projects/">
    
      <i class="sidebar-button-icon fa fa-lg fa-bug"></i>
      
      <span class="sidebar-button-desc">Projects</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/dimitri" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/tapoueh" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-left
              post-header-cover--partial"
       style="background-image:url('/img/old/wordpres-seo-categories-tags.jpg')"
       data-behavior="1">
    
  </div>


      <div id="main" data-behavior="1"
        class="hasCover
               hasCoverMetaOut
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Denormalizing Tags
    </h1>
  
  <div class="postShorten-meta post-meta">
  
    <time itemprop="datePublished" datetime="2013-10-24T13:40:00&#43;02:00">
      
  
  
  
  
    Thursday 24 Oct 2013
  

    </time>
  
  
  
  
    <span></span>
    
      <a class="category-link" href="/categories/postgresql">PostgreSQL</a>, 
    
      <a class="category-link" href="/categories/yesql">YeSQL</a>
    
  


</div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              

<p>In our
<a href="/tags/extensions">Tour of Extensions</a> today&rsquo;s article is about advanced tag indexing. We
have a great data collection to play with and our goal today is to be able
to quickly find data matching a complex set of tags. So, let&rsquo;s find out
those
<a href="http://www.lastfm.fr/">lastfm</a> tracks that are tagged as
<em>blues</em> and
<em>rhythm and blues</em>, for
instance.</p>

<p><em>In this article, we&rsquo;re going to play with music related tags</em></p>

<p>We&rsquo;re going to use the
<a href="http://labrosa.ee.columbia.edu/millionsong/lastfm">Last.fm dataset from the Million Song Dataset project</a>
here. The article where they present their similarity searches is providing
the whole dataset they have as a
<a href="http://www.sqlite.org/">SQLite</a> database and they propose to read
their python script
<a href="http://labrosa.ee.columbia.edu/millionsong/sites/default/files/lastfm/demo_tags_db.py">demo_tags_db.py</a> to make sense of it.</p>

<h2 id="the-setup">The Setup</h2>

<p>First, we need to import this dataset into a PostgreSQL database. To do that
the easier path I could think of was to hack the capability into
<em>pgloader</em> of
course, so here we go:</p>

<pre><code>Â                    table name       read   imported     errors       time
------------------------------  ---------  ---------  ---------  ---------
                          tags          0     522366          0      3.922
                          tids          0     505216          0      3.746
                       tid_tag          0    8598630          0    115.349
        index build completion          0          0          0     33.099
------------------------------  ---------  ---------  ---------  ---------
                  create index          0          8          0     38.839
               reset sequences          0          0          0      0.064
------------------------------  ---------  ---------  ---------  ---------
          Total streaming time          0    9626212          0  2m36.180s
</code></pre>

<p>Here,
<em>pgloader</em> extracted the table and index definitions from the SQLite
database using the
<code>sqlite_master</code> catalog and the
<code>PRAGMA table_info()</code>
commands, and migrated the data in a streaming fashion down to PostgreSQL,
using the
<em>COPY protocol</em>.</p>



 
  
  
  
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  

<div class="figure fig50 center dim-margin" >
  
    <a class="fancybox" href="/img/old/sqlite.gif" data-fancybox-group="">
  
    <img class="fig-img" src="/img/old/sqlite.gif" >
  
    </a>
  
  
</div>


<p>Having a look at the
<em>demo_tags.py</em> script we can actually see how to use the
relations here, and we realize they are using the
<a href="http://www.sqlite.org/autoinc.html">64-bit signed integer ROWID</a> system column. We need something comparable to
be able to make sense of the data:</p>

<pre><code>tags# alter table tags add column rowid serial;
ALTER TABLE
Time: 3177.603 ms

tags# alter table tids add column rowid serial;
ALTER TABLE
Time: 2528.680 ms

tags# SELECT tags.tag, COUNT(tid_tag.tid)
        FROM tid_tag, tags
       WHERE tid_tag.tag=tags.ROWID and tags.tag ~* 'setzer'
    GROUP BY tags.tag;
             tag             | count 
-----------------------------+-------
 the brian setzer orchestra  |     1
 Setzer                      |    13
 rockabilly Setzer style     |     4
 setzer is a true guitarhero |     9
 brian setzer orchestra      |     3
 brian setzer is GOD         |     1
 Brian Setzer                |     1
 brain setzer orchestra      |     2
(8 rows)

Time: 644.826 ms
</code></pre>

<p>Here the query is mainly doing a
<em>JOIN</em> in between the
<em>tid</em> table (containing
track ids) and the
<em>tid_tag</em> table (containing association in between tracks
and tags), filtering on the
<em>case insensitive regular expression</em>
<code>'setzer'</code>. As
we can imagine from reading the query execution time, we don&rsquo;t have any
index to implement the filtering here.</p>



 
  
  
  
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  

<div class="figure fig50 center dim-margin" >
  
    <a class="fancybox" href="/img/old/Last-FM.png" data-fancybox-group="">
  
    <img class="fig-img" src="/img/old/Last-FM.png" >
  
    </a>
  
  
</div>


<h2 id="advanced-tag-indexing">Advanced tag indexing</h2>

<p>PostgreSQL comes with plenty of interesting datatypes, one of them is known
as the
<a href="http://www.postgresql.org/docs/9.3/interactive/arrays.html">Arrays Type</a>. PostgreSQL also provides a very rich set of extensions,
some of them found under the
<em>contrib</em> package; one of them is
<a href="http://www.postgresql.org/docs/9.3/interactive/intarray.html">intarray</a>. Let
me quote for you the most interesting part of the documentation for that
extension:</p>

<blockquote>
<p>The @@ and ~~ operators test whether an array satisfies a query, which is
expressed as a value of a specialized data type query_int. A query consists
of integer values that are checked against the elements of the array,
possibly combined using the operators &amp; (AND), | (OR), and ! (NOT).
Parentheses can be used as needed. For example, the query 1&amp;(2|3) matches
arrays that contain 1 and also contain either 2 or 3.</p>
</blockquote>

<pre><code>tags# create extension intarray;
CREATE EXTENSION
</code></pre>

<p>The way the
<em>intarray</em> extension works, we need to build a new table that
contains for each track the list of tags it&rsquo;s been associated with, as an
array of integers. We&rsquo;re going to use our
<em>rowid</em> identifier for that purpose,
as in the following query:</p>

<pre><code>tags# SELECT tt.tid, array_agg(tags.rowid) as tags
        FROM tags JOIN tid_tag tt ON tags.rowid = tt.tag
    GROUP BY tt.tid
       LIMIT 3;
 tid |   tags    
-----+-----------
   1 | {1,2}
   2 | {3,4}
   3 | {5,6,7,8}
(3 rows)

Time: 942.074 ms
</code></pre>

<p>So let&rsquo;s build the full table then index it:</p>

<pre><code>tags# CREATE TABLE track_tags AS
   SELECT tt.tid, array_agg(tags.rowid) as tags
     FROM tags join tid_tag tt on tags.rowid = tt.tag
 GROUP BY tt.tid;
SELECT 505216
Time: 45388.424 ms

tags# create index on track_tags using gin(tags gin__int_ops);
CREATE INDEX
Time: 18645.931 ms
</code></pre>



 
  
  
  
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  

<div class="figure fig50 center dim-margin" >
  
    <a class="fancybox" href="/img/old/rhythm-and-blues-tag.jpg" data-fancybox-group="">
  
    <img class="fig-img" src="/img/old/rhythm-and-blues-tag.jpg" >
  
    </a>
  
  
</div>


<h2 id="searches">Searches</h2>

<p>Now
<a href="http://www.postgresql.org/">PostgreSQL</a> is ready for the real magic. Let&rsquo;s find all the tracks we
have that have been tagged as both
<em>blues</em> and
<em>rhythm and blues</em>:</p>

<pre><code>tags# select array_agg(rowid)
        from tags
       where tag = 'blues' or tag = 'rhythm and blues';
 array_agg 
-----------
 {3,739}
(1 row)

Time: 0.684 ms
</code></pre>

<p>Now what we want is a
<em>query_int</em> query string, which looks like
<code>'(1880&amp;179879)'</code>, so rather than just
<code>array_agg</code> we&rsquo;re going to use the
following query:</p>

<pre><code>tags# select format('(%s)',
                array_to_string(array_agg(rowid), '&amp;')
             )::query_int as query
        from tags
       where tag = 'blues' or tag = 'rhythm and blues';
  query  
---------
 3 &amp; 739
(1 row)

Time: 0.747 ms
</code></pre>

<p>That query here allows us to easily inject as many tags as we want to, so
that it&rsquo;s easy to use it as a
<em>template</em> from within an application where the
user is going to provide for the tags list. The
<em>intarray</em> extension&rsquo;s
<em>query</em>
format also accepts other operators (
<em>or</em> and
<em>not</em>) as we saw before, so if you
want to expose those to your users you would need to tweak the
<em>query_int</em>
building part of the SQL.</p>

<p>Now, how many tracks have been tagged with
<strong><em>both</em></strong> the
<em>blues</em> and the
<em>rhythm and
blues</em> tags, will you ask me:</p>

<pre><code>tags# with t(query) as (
       select format('(%s)',
                array_to_string(array_agg(rowid), '&amp;')
             )::query_int as query
        from tags
       where tag = 'blues' or tag = 'rhythm and blues'
)
select count(*) from track_tags, t
 where tags @@ query;
 count 
-------
  2278
(1 row)

Time: 8.242 ms
</code></pre>



 
  
  
  
  
    
      
    
  
    
      
    
  
    
  
    
      
    
  

<div class="figure fig50 center dim-margin" >
  
    <a class="fancybox" href="/img/old/rhythm-blues-final4.640.jpg" data-fancybox-group="">
  
    <img class="fig-img" src="/img/old/rhythm-blues-final4.640.jpg" >
  
    </a>
  
  
</div>


<p>Now of course you might want to fetch some track meta-data, here the only
one we have is the track
<em>hash id</em>:</p>

<pre><code>tags# with t(query) as (
    select format('(%s)',
                    array_to_string(array_agg(rowid), '&amp;')
           )::query_int as query
      from tags
       where tag = 'blues' or tag = 'rhythm and blues'
)
 select track.tid
   from track_tags tt join tids track on tt.tid = track.rowid, t
  where tt.tags @@ t.query
  limit 10;
        tid         
--------------------
 TRCJLCC12903CBF4AE
 TRCIFOV128F92F6F4C
 TRCYUVJ128F425C8F1
 TRCNTFO128F92F6564
 TRCDRGT12903CE64BF
 TRCWAED128F42A837B
 TRCWFEM128F9320F94
 TRCQCQH128F932E707
 TRCUMTA12903CD67EE
 TRJJYUT12903CFB13B
(10 rows)

Time: 7.630 ms
</code></pre>

<h2 id="conclusion">Conclusion</h2>

<p>The usual way to handle a set of user defined tags and query against it
involves join against a reference table of tags, but then it&rsquo;s quite
complicated to express the full search query: we want tracks tagged with
both
<em>blues</em> and
<em>rhythm and blues</em> and might want then to exclude
<em>finger
picking</em>.</p>

<p>The
<a href="http://www.postgresql.org/docs/9.3/interactive/intarray.html">intarray</a> extension provides a powerful
<em>query specialized language</em> with
direct index support, so that you can build dynamic indexes searches
directly from your application.</p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small"></span><br/>
                    
  <a class="tag tag--primary tag--small" href="http://tapoueh.org//tags/postgresql/">PostgreSQL</a>

  <a class="tag tag--primary tag--small" href="http://tapoueh.org//tags/extensions/">Extensions</a>

  <a class="tag tag--primary tag--small" href="http://tapoueh.org//tags/intagg/">intagg</a>

  <a class="tag tag--primary tag--small" href="http://tapoueh.org//tags/yesql/">YeSQL</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2013/11/back-from-dublin/" data-tooltip="Back From Dublin">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2013/10/an-interview-about-mariadb-and-postgresql/" data-tooltip="An Interview about MariaDB and PostgreSQL">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f10%2fdenormalizing-tags%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f10%2fdenormalizing-tags%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f10%2fdenormalizing-tags%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2017 Dimitri Fontaine. 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="1">
        <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2013/11/back-from-dublin/" data-tooltip="Back From Dublin">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2013/10/an-interview-about-mariadb-and-postgresql/" data-tooltip="An Interview about MariaDB and PostgreSQL">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f10%2fdenormalizing-tags%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f10%2fdenormalizing-tags%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f10%2fdenormalizing-tags%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="1">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f10%2fdenormalizing-tags%2f">
        <i class="fa fa-google-plus"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f10%2fdenormalizing-tags%2f">
        <i class="fa fa-facebook-official"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http%3a%2f%2ftapoueh.org%2fblog%2f2013%2f10%2fdenormalizing-tags%2f">
        <i class="fa fa-twitter"></i><span></span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=110" alt="" />
    
    <h4 id="about-card-name">Dimitri Fontaine</h4>
    
      <div id="about-card-bio">PostgreSQL Major Contributor</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Open Source Software Engineer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        France
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center"></div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2015/11/all-your-base-conference-2015/">
                <h3 class="media-heading">All Your Base Conference 2015</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I had the pleasure to be invited to speak at All Your Base Conference 2015 about PostgreSQL (of course). The conference gathers together lots of user experience around data management and database products, either in the now classic meaning of the word (I mean relational database management systems here) or the newer set of trade-offs represented by the NoSQL set of tools.
  The conference was very nicely organized and ran smoothly, and I got the unique chance to get a back from the trenches story series about people tools of choices and the reason why they do things their way.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2015/05/postgresql-au-jug-de-montpellier/">
                <h3 class="media-heading">PostgreSQL au JUG de Montpellier</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">J&rsquo;ai eu le plaisir de prÃ©senter PostgreSQL au Java User Group de Montpellier le 20 mai dernier dans le cadre d&rsquo;une soirÃ©e PostgreSQL is YeSQL. L&rsquo;accueil rÃ©servÃ© par le JUG a Ã©tÃ© parfait et je tiens Ã  les remercier pour une trÃ¨s bonne soirÃ©e de partage et d&rsquo;Ã©changes autour de PostgreSQL.
Les slides des prÃ©sentations sont disponibles. Nous avons commencÃ© par une prÃ©sentation gÃ©nÃ©rale sur comment et pourquoi utiliser PostgreSQL en 2015Â :</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2015/05/quicklisp-and-debian/">
                <h3 class="media-heading">Quicklisp and debian</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Common Lisp users are very happy to use Quicklisp when it comes to downloading and maintaining dependencies between their own code and the librairies it is using.
Sometimes I am pointed that when compared to other programming languages Common Lisp is lacking a lot in the batteries included area. After having had to package about 50 common lisp librairies for debian I can tell you that I politely disagree with that.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2015/04/pgday-paris/">
                <h3 class="media-heading">pgDay Paris</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Le 21 avril prochain se tient le premier pgDay Paris: une confÃ©rence PostgreSQL d&rsquo;une journÃ©e complÃ¨te. Il s&rsquo;agit de 8 confÃ©rences sur votre base de donnÃ©es prÃ©fÃ©rÃ©e par des confÃ©rencers internationaux, incluant des retours d&rsquo;expÃ©rience et une analyse de l&rsquo;utilisation des derniers dÃ©veloppements en cours dans notre projet de base de donnÃ©es prÃ©fÃ©rÃ©.
  *pgDay Paris, 21 avril 2015Â : 8 confÃ©rences PostgreSQL*
Pour 65 â¬ l&rsquo;accÃ¨s Ã  la confÃ©rence inclut les pauses cafÃ©s (avec thÃ©, eau, biscuits, etc) et le dÃ©jeuner sur place (repas complet servi Ã  table).</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2015/03/a-pgday-in-paris/">
                <h3 class="media-heading">a pgDay in Paris!</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Mar 3, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">I was lucky to participate as a speaker to the Nordic PostgreSQL Day 2015 and it&rsquo;s been another awesome edition of the conference. Really smooth, everything has been running as it should, with about one hundred people at the conference.
In action at Nordic pgDay in Copenhaguen
You can get the slides I&rsquo;ve been using for my talk at the Nordic pgDay 2015 page on the Conferences pages of this website.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2015/02/back-from-fosdem-2015/">
                <h3 class="media-heading">Back From FOSDEM 2015</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">The FOSDEM 2015 edition has been awesome this year, the usual mix of meeting with old friends, talking about interesting topics, seeing tremendous activity in all Open Source domains, and having Belgium beers in the evenings.
  FOSDEM PGDAY On the Friday before the real FOSDEM event our own PostgreSQL Europe organized a one-day event, the FOSDEM PGDAY. It as an intense day of conferences about PostgreSQL, where I had the opportunity to present pgloader in the context of dealing with database migrations.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2015/01/my-first-slashdot-effect/">
                <h3 class="media-heading">My First Slashdot Effect</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Thanks to the Postgres Weekly issue #89 and a post to Hacker News front page (see Pgloader: A High-speed PostgreSQL Swiss Army Knife, Written in Lisp it well seems that I just had my first Slashdot effect&hellip;
Well actually you know what? I don&rsquo;t&hellip;
So please consider using the new mirror http://dimitri.github.io/pgloader/ and maybe voting on Hacker News for either tooling around your favorite database system, PostgreSQL or your favorite programming language, Common Lisp&hellip;</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2015/01/new-release-pgloader-3.2/">
                <h3 class="media-heading">New release: pgloader 3.2</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2015
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">PostgreSQL comes with an awesome bulk copy protocol and tooling best known as the COPY and \copy commands. Being a transactional system, PostgreSQL COPY implementation will ROLLBACK any work done if a single error is found in the data set you&rsquo;re importing. That&rsquo;s the reason why pgloader got started: it provides with error handling for the COPY protocol.
That&rsquo;s basically what pgloader used to be all about
As soon as we have the capability to load data from unreliable sources, another use case appears on the horizon, and soon enough pgloader grew the capacity to load data from other databases, some having a more liberal notion of what is sane data type input.</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2014/10/meetup-postgresql-%C3%A0-paris/">
                <h3 class="media-heading">Meetup PostgreSQL Ã  Paris</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Oct 10, 2014
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">Mercredi 8 octobre se tiendra le prochain Meetup PostgreSQL Ã  Paris dans les locaux de Mozilla Europe, dont la capacitÃ© est de 90 personnesÂ ! Venez nombreuxÂ !
Le programme de cette Ã©dition est un peu particulier puisque nous avons reÃ§u quatre propositions enthousiastes de prÃ©sentations. Chacun aura donc 15 Ã  20 minutes (questions incluses) pour prÃ©senter son sujet. Voici le programmeÂ :
 AggrÃ©gation temporelle sous contrainte d&rsquo;iops, par Jean-GÃ©rard Pailloncy</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="http://tapoueh.org/blog/2014/09/php-tour-la-video/">
                <h3 class="media-heading">PHP Tour, La Video</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Sep 9, 2014
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">En juin dernier se tenait le PHP Tour 2014 Ã  Lyon, oÃ¹ j&rsquo;ai eu le plaisir de prÃ©senter une confÃ©rence sur PostgreSQL en 2014.
  Cette intervention Ã©tait filmÃ©e, et la vidÃ©o est maintenant disponibleÂ :

 
En espÃ©rant que vous regarderez cette vidÃ©o avec autant d&rsquo;intÃ©rÃªt que j&rsquo;ai eu Ã  participer Ã  PHP Tour 2014Â !</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero=""
         data-message-one=""
         data-message-other="">
         229 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('http://tapoueh.org/images/Tree_Of_Light_by_lowapproach.jpg');"></div>
  


    
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.js"></script>


<script src="/js/script-wl33z0n6ocaypepiqrazthtivfrliqijej4rq8ek8gvrv1awftmgjuv8k4zc.min.js"></script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight').each(function(i, block) {
    var code = "";
    hljs.highlightAuto(block.innerText).value.split(/\r\n|\r|\n/).forEach(function(line) {
      code += "<span class=\"line\">" + line + "</span><br>";
    });
    if (code.length > 0) {
      block.innerHTML = code;  
    }
  });
  $('pre > code').each(function(i, block) {
    $(this).addClass('codeblock');
    hljs.highlightBlock(block);
  });
});
</script>

  
    
  





    
  </body>
</html>

