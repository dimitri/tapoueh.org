

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.31.1">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>Aggregating NBA data, PostgreSQL vs MongoDB</title>
    <meta name="author" content="Dimitri Fontaine">
    <meta name="keywords" content="">

    <link rel="icon" href="/favicon.ico">
    

    
    <meta name="description" content="When reading the article
Crunching 30 Years of NBA Data with MongoDB Aggregation I coulnd&rsquo;t help but
think that we&rsquo;ve been enjoying
aggregates in SQL for 3 or 4 decades already.
When using
PostgreSQL it&rsquo;s even easy to actually add your own aggregates
given the SQL command
create aggregate.

">
    <meta property="og:description" content="When reading the article
Crunching 30 Years of NBA Data with MongoDB Aggregation I coulnd&rsquo;t help but
think that we&rsquo;ve been enjoying
aggregates in SQL for 3 or 4 decades already.
When using
PostgreSQL it&rsquo;s even easy to actually add your own aggregates
given the SQL command
create aggregate.

">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Aggregating NBA data, PostgreSQL vs MongoDB">
    <meta property="og:url" content="/blog/2014/02/aggregating-nba-data-postgresql-vs-mongodb/">
    <meta property="og:site_name" content="Dimitri Fontaine, PostgreSQL Expert">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Aggregating NBA data, PostgreSQL vs MongoDB">
    <meta name="twitter:description" content="When reading the article
Crunching 30 Years of NBA Data with MongoDB Aggregation I coulnd&rsquo;t help but
think that we&rsquo;ve been enjoying
aggregates in SQL for 3 or 4 decades already.
When using
PostgreSQL it&rsquo;s even easy to actually add your own aggregates
given the SQL command
create aggregate.

">
    
      <meta name="twitter:creator" content="@tapoueh">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=640">
    

    
      <meta property="og:image" content="https://tapoueh.org/img/old/postgresql-mongodb.jpg">
    
    
      <meta property="og:image" content="https://tapoueh.org/img/old/postgresql-mongodb.jpg">
    
    

    

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="/css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    
      <link rel="stylesheet" href="https://tapoueh.org/css/dim.css">
    
      <link rel="stylesheet" href="https://tapoueh.org/css/nav.css">
    

    
      
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-47059482-1', 'auto');
ga('send', 'pageview');
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="navbar-collapse collapse header-title" id="navigation">
    <ul class="nav navbar-nav navbar-right">
      
      <li class="dropdown">
        
        <a href="/">blog</a>
        
      </li>
      
      <li class="dropdown">
        
        <a href="/conf/">talks</a>
        
      </li>
      
      <li class="dropdown">
        
        <a href="http://pgloader.io/">pgloader</a>
        
      </li>
      
      <li class="dropdown">
        
        <a href="http://masteringpostgresql.com/">Mastering PostgreSQL</a>
        
      </li>
      
    </ul>
  </div>

  
    
      <a class="header-right-icon "
         href="http://masteringpostgresql.com" target="_blank">
    
    
      <i class="fa fa-lg fa-book"></i>
    
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=110" alt="" />
        </a>
        <h4 class="sidebar-profile-name">Dimitri Fontaine</h4>
        
          <h5 class="sidebar-profile-bio">PostgreSQL Major Contributor</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/">
    
      <i class="sidebar-button-icon fa fa-lg fa-pagelines"></i>
      
      <span class="sidebar-button-desc">Blog</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/about/">
    
      <i class="sidebar-button-icon fa fa-lg fa-beer"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories/yesql/">
    
      <i class="sidebar-button-icon fa fa-lg fa-database"></i>
      
      <span class="sidebar-button-desc">YeSQL</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="http://masteringpostgresql.com" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-book"></i>
      
      <span class="sidebar-button-desc">Mastering PostgreSQL</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/dimitri" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://twitter.com/tapoueh" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
      
      <span class="sidebar-button-desc">Twitter</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-left
              post-header-cover--partial"
       style="background-image:url('/img/old/postgresql-mongodb.jpg')"
       data-behavior="5">
    
      <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      Aggregating NBA data, PostgreSQL vs MongoDB
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2014-02-17T23:40:00&#43;01:00">
        
  
  
  
  
    Monday 17 Feb 2014
  

      </time>
    
    
  
  
    <span></span>
    
      <a class="category-link" href="/categories/postgresql">PostgreSQL</a>, 
    
      <a class="category-link" href="/categories/yesql">YeSQL</a>
    
  

  </div>

</div>
    
  </div>


      <div id="main" data-behavior="5"
        class="hasCover
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <p>When reading the article
<a href="http://thecodebarbarian.wordpress.com/2014/02/14/crunching-30-years-of-nba-data-with-mongodb-aggregation/">Crunching 30 Years of NBA Data with MongoDB Aggregation</a> I coulnd&rsquo;t help but
think that we&rsquo;ve been enjoying
<a href="http://www.postgresql.org/docs/current/static/tutorial-agg.html">aggregates</a> in SQL for 3 or 4 decades already.
When using
<a href="http://www.postgresql.org/">PostgreSQL</a> it&rsquo;s even easy to actually add your own aggregates
given the SQL command
<a href="http://www.postgresql.org/docs/current/static/sql-createaggregate.html">create aggregate</a>.</p>

<p></p>

<p><center><em>Photo Credit: <a href="https://www.flickr.com/photos/57426425@N07/6005436411/sizes/z/">Copyright All rights reserved by Segward Graupner</a></em></center></p>

<p>The next step after thinking how obvious the queries written in the
mentionned article would be to express in SQL was to actually load the data
into PostgreSQL and write the aggregate queries, of course.</p>

<h1 id="table-of-contents"></h1><nav id="TableOfContents">
<ul>
<li><a href="#loading-the-data">Loading the data</a></li>
<li><a href="#running-the-aggregates">Running the Aggregates</a></li>
<li><a href="#correlating-stats-with-wins">Correlating stats with wins</a></li>
<li><a href="#defensive-rebounds-and-total-rebounds-versus-win-percentage">Defensive Rebounds and Total Rebounds Versus Win Percentage</a></li>
<li><a href="#interesting-factoid">Interesting factoid</a></li>
<li><a href="#total-rebounds-and-wins">Total rebounds and wins</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</nav>

<h1 id="loading-the-data">Loading the data</h1>

<p>With the help of a little bit of
<em>Common Lisp</em> code and using the
<a href="https://github.com/archimag/mongo-cl-driver">mongo-cl-driver</a> it was easy enough to parse the given
<a href="http://bsonspec.org/">BSON</a> file. What was
more complex was to actually understand enough of the data model to produce
a relational design out of it, avoiding data redundancy as much as possible.</p>

<p>We call that step
<em>normalization</em> in old-style relational databases, and the
goal of that process is to avoid
<em>functional dependency</em> so that the data is
easier to understand, verify and process the data once loaded.</p>

<p>For instance, rather than have both scores from each team and a column
<code>won</code>
per team, which would be a boolean but is a number in the given
<em>BSON</em> file,
we store only the scores. Here&rsquo;s the main table definition of the stats we
are going to be playing with, the
<code>game</code> table:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#00a">create</span> <span style="color:#00a">table</span> nba.game (
  id          <span style="color:#0aa">serial</span> <span style="color:#00a">primary</span> <span style="color:#00a">key</span>,
  <span style="color:#0aa">date</span>        timestamptz,
  <span style="color:#00a">host</span>        <span style="color:#0aa">int</span> <span style="color:#00a">references</span> nba.team(id),
  guest       <span style="color:#0aa">int</span> <span style="color:#00a">references</span> nba.team(id),
  host_score  <span style="color:#0aa">int</span>,
  guest_score <span style="color:#0aa">int</span>
);</code></pre></div>
<p>As much of the aggregates in the referenced article are playing with
statistics from teams who actually
<em>won</em> the game, let&rsquo;s create a view to
simplify our SQL queries thereafter:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#00a">create</span> <span style="color:#00a">view</span> winners <span style="color:#00a">as</span>
  <span style="color:#00a">select</span> id,
         <span style="color:#0aa">date</span>,
         <span style="color:#00a">case</span> <span style="color:#00a">when</span> host_score &gt; guest_score
              <span style="color:#00a">then</span> <span style="color:#00a">host</span>
              <span style="color:#00a">else</span> guest
          <span style="color:#00a">end</span> <span style="color:#00a">as</span> winner
    <span style="color:#00a">from</span> game;</code></pre></div>
<p>If you&rsquo;re not doing much SQL, remember that creating such a view is common
practice in the relational world.</p>

<h1 id="running-the-aggregates">Running the Aggregates</h1>

<p>Now that we have the extra useful view, it&rsquo;s possible to implement the first
<a href="http://www.mongodb.org/">MongoDB</a> query in SQL. First, let&rsquo;s have a look at the MongoDB query:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">db.games.aggregate([
  {
    $match : {
      date : {
        $gt : ISODate(<span style="color:#a50">&#34;1999-08-01T00:00:00Z&#34;</span>),
        $lt : ISODate(<span style="color:#a50">&#34;2000-08-01T00:00:00Z&#34;</span>)
      }
    }
  },
  {
    $unwind : <span style="color:#a50">&#39;$teams&#39;</span>
  },
  {
    $match : {
      <span style="color:#a50">&#39;teams.won&#39;</span> : <span style="color:#099">1</span>
    }
  },
  {
    $group : {
      _id : <span style="color:#a50">&#39;$teams.name&#39;</span>,
      wins : { $sum : <span style="color:#099">1</span> }
    }
  },
  {
    $sort : { wins : -<span style="color:#099">1</span> }
  },
  {
    $limit : <span style="color:#099">5</span>
  }
]);</code></pre></div>
<p>I don&rsquo;t know about you, but I have quite a hard time deciphering what that
query is actually doing, and when the explanation text talks about
<em>using a
6-stage pipeline</em> my understanding is that the application developper has
been writing the
<em>execution plan</em> of the query here. Let&rsquo;s ignore the query
format itself, as it&rsquo;s obviously meant to be generated by a tool rather than
typed by a human being.</p>

<p>Here&rsquo;s the same query in SQL, with the result this time:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">  <span style="color:#00a">SELECT</span> abbrev, name, <span style="color:#00a">count</span>(*)
    <span style="color:#00a">FROM</span> winners <span style="color:#00a">JOIN</span> team <span style="color:#00a">ON</span> team.id = winners.winner
   <span style="color:#00a">WHERE</span>     <span style="color:#0aa">date</span> &gt; <span style="color:#a50">&#39;1999-08-01T00:00:00Z&#39;</span>
         <span style="color:#00a">AND</span> <span style="color:#0aa">date</span> &lt; <span style="color:#a50">&#39;2000-08-01T00:00:00Z&#39;</span>
<span style="color:#00a">GROUP</span> <span style="color:#00a">BY</span> winner, abbrev, name
<span style="color:#00a">ORDER</span> <span style="color:#00a">BY</span> <span style="color:#00a">count</span>(*) <span style="color:#00a">DESC</span>
   <span style="color:#00a">LIMIT</span> <span style="color:#099">5</span>;

 abbrev |          name          | <span style="color:#00a">count</span> 
<span style="color:#aaa;font-style:italic">--------+------------------------+-------
</span><span style="color:#aaa;font-style:italic"></span> LAL    | Los Angeles Lakers     |    <span style="color:#099">67</span>
 POR    | Portland Trail Blazers |    <span style="color:#099">59</span>
 IND    | Indiana Pacers         |    <span style="color:#099">56</span>
 UTA    | Utah Jazz              |    <span style="color:#099">55</span>
 SAS    | San Antonio Spurs      |    <span style="color:#099">53</span>
(<span style="color:#099">5</span> <span style="color:#00a">rows</span>)

Time: <span style="color:#099">8</span>.<span style="color:#099">101</span> ms</code></pre></div>
<p>What we have here is a pretty basic query using a
<em>join</em>, a
<em>where</em> clause to
restrict the data set we are playing with, a
<em>group by</em> clause to define which
data to compute the aggregates against, with an
<em>order by</em> and a
<em>limit</em> clause
for presenting the result. To be realistic, if you&rsquo;ve ever done any SQL at
all, then you know how to read that query because you&rsquo;ve been writing dozens
of similar ones.</p>

<p>Here&rsquo;s, as in the original article, the same query against a much larger
data set this time, with all games of the 2000s decade:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql">   <span style="color:#00a">SELECT</span> abbrev, name, <span style="color:#00a">count</span>(*)
     <span style="color:#00a">FROM</span> winners <span style="color:#00a">join</span> team <span style="color:#00a">on</span> team.id = winners.winner
    <span style="color:#00a">WHERE</span>     <span style="color:#0aa">date</span> &gt; <span style="color:#a50">&#39;2000-08-01T00:00:00Z&#39;</span>
          <span style="color:#00a">AND</span> <span style="color:#0aa">date</span> &lt; <span style="color:#a50">&#39;2010-08-01T00:00:00Z&#39;</span>
 <span style="color:#00a">GROUP</span> <span style="color:#00a">BY</span> winner, abbrev, name
 <span style="color:#00a">ORDER</span> <span style="color:#00a">BY</span> <span style="color:#00a">count</span>(*) <span style="color:#00a">DESC</span>
    <span style="color:#00a">LIMIT</span> <span style="color:#099">5</span>;

 abbrev |        name        | <span style="color:#00a">count</span> 
<span style="color:#aaa;font-style:italic">--------+--------------------+-------
</span><span style="color:#aaa;font-style:italic"></span> SAS    | San Antonio Spurs  |   <span style="color:#099">579</span>
 DAL    | Dallas Mavericks   |   <span style="color:#099">568</span>
 LAL    | Los Angeles Lakers |   <span style="color:#099">524</span>
 PHO    | Phoenix Suns       |   <span style="color:#099">495</span>
 DET    | Detroit Pistons    |   <span style="color:#099">489</span>
(<span style="color:#099">5</span> <span style="color:#00a">rows</span>)

Time: <span style="color:#099">24</span>.<span style="color:#099">713</span> ms</code></pre></div>
<h1 id="correlating-stats-with-wins">Correlating stats with wins</h1>

<p>The goal here is to compute how often a team wins when they record more
defensive rebounds than their opponent across the entire data set.</p>

<p>To be able to compute the percentage, we have to have a count of all
registered games, of course. Then we are going to count how many times the
winner team registered a greater
<em>team_stats.drb</em> than the loser, and
<em>count
how many times</em> in SQL is usually written as a
<code>sum(case when &lt;condition&gt; then
1 else 0 end)</code>, which is what we&rsquo;re doing here:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#00a">select</span> <span style="color:#00a">count</span>(*) <span style="color:#00a">as</span> games,
       <span style="color:#00a">sum</span>(<span style="color:#00a">case</span> <span style="color:#00a">when</span> ws.drb &gt; ls.drb <span style="color:#00a">then</span> <span style="color:#099">1</span> <span style="color:#00a">else</span> <span style="color:#099">0</span> <span style="color:#00a">end</span>) <span style="color:#00a">as</span> drb,
       <span style="color:#00a">sum</span>(<span style="color:#00a">case</span> <span style="color:#00a">when</span> ws.drb &gt; ls.drb <span style="color:#00a">then</span> <span style="color:#099">1</span> <span style="color:#00a">else</span> <span style="color:#099">0</span> <span style="color:#00a">end</span>)::<span style="color:#0aa">float</span> / <span style="color:#00a">count</span>(*) * <span style="color:#099">100</span> <span style="color:#00a">as</span> pct
  <span style="color:#00a">from</span> winlose wl
       <span style="color:#00a">join</span> team w <span style="color:#00a">on</span> wl.winner = w.id
       <span style="color:#00a">join</span> team l <span style="color:#00a">on</span> wl.loser = l.id
       <span style="color:#00a">join</span> team_stats ws <span style="color:#00a">on</span> ws.game = wl.id <span style="color:#00a">and</span> ws.team = wl.winner
       <span style="color:#00a">join</span> team_stats ls <span style="color:#00a">on</span> ls.game = wl.id <span style="color:#00a">and</span> ls.team = wl.loser;

 games |  drb  |       pct        
<span style="color:#aaa;font-style:italic">-------+-------+------------------
</span><span style="color:#aaa;font-style:italic"></span> <span style="color:#099">31686</span> | <span style="color:#099">22292</span> | <span style="color:#099">70</span>.<span style="color:#099">3528372151739</span>
(<span style="color:#099">1</span> <span style="color:#00a">row</span>)

Time: <span style="color:#099">276</span>.<span style="color:#099">669</span> ms</code></pre></div>
<p>We note here than in the original MongoDB article the aggregation query is
short of computing the
<em>percentage</em> directly, apparently it&rsquo;s been done in the
client tool, maybe using a
<em>spreadsheet</em> application or something.</p>

<h1 id="defensive-rebounds-and-total-rebounds-versus-win-percentage">Defensive Rebounds and Total Rebounds Versus Win Percentage</h1>




<div class="figure fig25 right dim-margin" >
  
    <img class="fig-img" src="/img/old/DReboundsVandy.320.png" >
  
  
</div>


<p>Next, still following on our inspirational article
<a href="http://thecodebarbarian.wordpress.com/2014/02/14/crunching-30-years-of-nba-data-with-mongodb-aggregation/">Crunching 30 Years of NBA Data with MongoDB Aggregation</a>, we’re going to
compute what percentage of the time a team wins as a function of the number
of defensive rebounds they recorded.</p>

<p>I&rsquo;m not sure I understand what they achieve with averaging ones when a team
wins and zero when a team loses, so I couldn&rsquo;t quite reproduce their result.
Here&rsquo;s an approaching query tho:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#00a">with</span> game_stats <span style="color:#00a">as</span> (
    <span style="color:#00a">select</span> t.id, <span style="color:#00a">count</span>(*)
      <span style="color:#00a">from</span> team t <span style="color:#00a">join</span> game <span style="color:#00a">on</span> game.<span style="color:#00a">host</span> = t.id <span style="color:#00a">or</span> game.guest = t.id
   <span style="color:#00a">group</span> <span style="color:#00a">by</span> t.id
)
<span style="color:#00a">select</span> ts.team, round(<span style="color:#00a">avg</span>(drb), <span style="color:#099">2</span>) <span style="color:#00a">as</span> drb,
       round(<span style="color:#00a">count</span>(*) / gs.<span style="color:#00a">count</span>::<span style="color:#0aa">numeric</span> * <span style="color:#099">100</span>, <span style="color:#099">2</span>) <span style="color:#00a">as</span> winpct,
       <span style="color:#00a">count</span>(*) <span style="color:#00a">as</span> wins, gs.<span style="color:#00a">count</span> <span style="color:#00a">as</span> games
  <span style="color:#00a">from</span> team_stats ts
       <span style="color:#00a">join</span> game <span style="color:#00a">on</span> game.id = ts.game
                <span style="color:#00a">and</span> game.<span style="color:#00a">host</span> = ts.team
                <span style="color:#00a">and</span> game.host_score &gt; game.guest_score
       <span style="color:#00a">join</span> game_stats gs <span style="color:#00a">on</span> gs.id = ts.team
<span style="color:#00a">group</span> <span style="color:#00a">by</span> ts.team, gs.<span style="color:#00a">count</span>;

 team |  drb  | winpct | wins | games 
<span style="color:#aaa;font-style:italic">------+-------+--------+------+-------
</span><span style="color:#aaa;font-style:italic"></span>    <span style="color:#099">4</span> | <span style="color:#099">31</span>.<span style="color:#099">59</span> |  <span style="color:#099">31</span>.<span style="color:#099">46</span> |  <span style="color:#099">710</span> |  <span style="color:#099">2257</span>
    <span style="color:#099">7</span> | <span style="color:#099">32</span>.<span style="color:#099">55</span> |  <span style="color:#099">31</span>.<span style="color:#099">89</span> |  <span style="color:#099">720</span> |  <span style="color:#099">2258</span>
   <span style="color:#099">16</span> | <span style="color:#099">31</span>.<span style="color:#099">70</span> |  <span style="color:#099">37</span>.<span style="color:#099">62</span> |  <span style="color:#099">849</span> |  <span style="color:#099">2257</span></code></pre></div>
<p>I only pasted the first few lines of the result because I&rsquo;m not sure how to
make sense of it, really.</p>

<h1 id="interesting-factoid">Interesting factoid</h1>

<p>What I find most interesting in the following
<em>factoid</em> proposed in the
MongoDB article is the complete lack of the query you need to run in order
to grab the matching data:</p>

<blockquote>
<p>An interesting factoid: the team that recorded the fewest defensive rebounds
in a win was the 1995-96 Toronto Raptors, who beat the Milwaukee Bucks 93-87
on 12/26/1995 despite recording only 14 defensive rebounds.</p>
</blockquote>

<p>When doing the necessary query in SQL, using a
<a href="http://www.postgresql.org/docs/current/static/queries-with.html">Common Table Expression</a> (the
<code>WITH</code> syntax) and a
<a href="http://www.postgresql.org/docs/9.3/static/tutorial-window.html">Window Function</a> for good measure, we get actually 4
different games with the minimum defensive rebounds in our history of NBA
games, 14:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#00a">with</span> stats(game, team, drb, <span style="color:#00a">min</span>) <span style="color:#00a">as</span> (
    <span style="color:#00a">select</span> ts.game, ts.team, drb, <span style="color:#00a">min</span>(drb) over ()
      <span style="color:#00a">from</span> team_stats ts
           <span style="color:#00a">join</span> winners w <span style="color:#00a">on</span> w.id = ts.game <span style="color:#00a">and</span> w.winner = ts.team
)
<span style="color:#00a">select</span> game.<span style="color:#0aa">date</span>::<span style="color:#0aa">date</span>,
       <span style="color:#00a">host</span>.name || <span style="color:#a50">&#39; -- &#39;</span> || host_score <span style="color:#00a">as</span> <span style="color:#00a">host</span>,
       guest.name || <span style="color:#a50">&#39; -- &#39;</span> || guest_score <span style="color:#00a">as</span> guest,
       stats.drb <span style="color:#00a">as</span> winner_drb
  <span style="color:#00a">from</span> stats
       <span style="color:#00a">join</span> game <span style="color:#00a">on</span> game.id = stats.game
       <span style="color:#00a">join</span> team <span style="color:#00a">host</span> <span style="color:#00a">on</span> <span style="color:#00a">host</span>.id = game.<span style="color:#00a">host</span>
       <span style="color:#00a">join</span> team guest <span style="color:#00a">on</span> guest.id = game.guest
 <span style="color:#00a">where</span> drb = <span style="color:#00a">min</span>;

-[ RECORD <span style="color:#099">1</span> ]<span style="color:#aaa;font-style:italic">----------------------------
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#0aa">date</span>       | <span style="color:#099">1995</span>-<span style="color:#099">12</span>-<span style="color:#099">26</span>
<span style="color:#00a">host</span>       | Toronto Raptors <span style="color:#aaa;font-style:italic">-- 93
</span><span style="color:#aaa;font-style:italic"></span>guest      | Milwaukee Bucks <span style="color:#aaa;font-style:italic">-- 87
</span><span style="color:#aaa;font-style:italic"></span>winner_drb | <span style="color:#099">14</span>
-[ RECORD <span style="color:#099">2</span> ]<span style="color:#aaa;font-style:italic">----------------------------
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#0aa">date</span>       | <span style="color:#099">1996</span>-<span style="color:#099">02</span>-<span style="color:#099">02</span>
<span style="color:#00a">host</span>       | Golden <span style="color:#00a">State</span> Warriors <span style="color:#aaa;font-style:italic">-- 114
</span><span style="color:#aaa;font-style:italic"></span>guest      | Toronto Raptors <span style="color:#aaa;font-style:italic">-- 111
</span><span style="color:#aaa;font-style:italic"></span>winner_drb | <span style="color:#099">14</span>
-[ RECORD <span style="color:#099">3</span> ]<span style="color:#aaa;font-style:italic">----------------------------
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#0aa">date</span>       | <span style="color:#099">1998</span>-<span style="color:#099">03</span>-<span style="color:#099">31</span>
<span style="color:#00a">host</span>       | Vancouver Grizzlies <span style="color:#aaa;font-style:italic">-- 101
</span><span style="color:#aaa;font-style:italic"></span>guest      | Dallas Mavericks <span style="color:#aaa;font-style:italic">-- 104
</span><span style="color:#aaa;font-style:italic"></span>winner_drb | <span style="color:#099">14</span>
-[ RECORD <span style="color:#099">4</span> ]<span style="color:#aaa;font-style:italic">----------------------------
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#0aa">date</span>       | <span style="color:#099">2009</span>-<span style="color:#099">01</span>-<span style="color:#099">14</span>
<span style="color:#00a">host</span>       | <span style="color:#00a">New</span> York Knicks <span style="color:#aaa;font-style:italic">-- 128
</span><span style="color:#aaa;font-style:italic"></span>guest      | Washington Wizards <span style="color:#aaa;font-style:italic">-- 122
</span><span style="color:#aaa;font-style:italic"></span>winner_drb | <span style="color:#099">14</span>

Time: <span style="color:#099">126</span>.<span style="color:#099">276</span> ms</code></pre></div>
<p>To understand all there&rsquo;s to know about
<em>window functions</em>, have a look at my
article on the topic:
<a href="/blog/2013/08/20-Window-Functions">Understanding Window Functions</a>.</p>

<h1 id="total-rebounds-and-wins">Total rebounds and wins</h1>

<p>The next interesting aside is the following:</p>

<blockquote>
<p>As an aside, the Cleveland Cavaliers beat the New York Knicks 101-97 on
April 11, 1996, despite recording only 21 total rebounds. Inversely, the San
Antonio Spurs lost to the Houston Rockets, 112-110, on January 4, 1992
despite recording 75 total rebounds.</p>
</blockquote>

<p>Which we translate in SQL as the following query:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sql" data-lang="sql"><span style="color:#00a">with</span> stats <span style="color:#00a">as</span> (
    <span style="color:#00a">select</span> ts.game, ts.team, trb,
           <span style="color:#00a">min</span>(trb) over () <span style="color:#00a">as</span> <span style="color:#00a">min</span>,
           <span style="color:#00a">max</span>(trb) over () <span style="color:#00a">as</span> <span style="color:#00a">max</span>
      <span style="color:#00a">from</span> team_stats ts
           <span style="color:#00a">join</span> winners w <span style="color:#00a">on</span> w.id = ts.game <span style="color:#00a">and</span> w.winner = ts.team
)
<span style="color:#00a">select</span> game.<span style="color:#0aa">date</span>::<span style="color:#0aa">date</span>,
       <span style="color:#00a">host</span>.name || <span style="color:#a50">&#39; -- &#39;</span> || host_score <span style="color:#00a">as</span> <span style="color:#00a">host</span>,
       guest.name || <span style="color:#a50">&#39; -- &#39;</span> || guest_score <span style="color:#00a">as</span> guest,
       stats.trb <span style="color:#00a">as</span> winner_trb
  <span style="color:#00a">from</span> stats
       <span style="color:#00a">join</span> game <span style="color:#00a">on</span> game.id = stats.game
       <span style="color:#00a">join</span> team <span style="color:#00a">host</span> <span style="color:#00a">on</span> <span style="color:#00a">host</span>.id = game.<span style="color:#00a">host</span>
       <span style="color:#00a">join</span> team guest <span style="color:#00a">on</span> guest.id = game.guest
 <span style="color:#00a">where</span> trb = <span style="color:#00a">min</span> <span style="color:#00a">or</span> trb = <span style="color:#00a">max</span>;

-[ RECORD <span style="color:#099">1</span> ]<span style="color:#aaa;font-style:italic">--------------------------
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#0aa">date</span>       | <span style="color:#099">1995</span>-<span style="color:#099">12</span>-<span style="color:#099">28</span>
<span style="color:#00a">host</span>       | Dallas Mavericks <span style="color:#aaa;font-style:italic">-- 103
</span><span style="color:#aaa;font-style:italic"></span>guest      | Vancouver Grizzlies <span style="color:#aaa;font-style:italic">-- 101
</span><span style="color:#aaa;font-style:italic"></span>winner_trb | <span style="color:#099">76</span>
-[ RECORD <span style="color:#099">2</span> ]<span style="color:#aaa;font-style:italic">--------------------------
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#0aa">date</span>       | <span style="color:#099">1996</span>-<span style="color:#099">04</span>-<span style="color:#099">11</span>
<span style="color:#00a">host</span>       | <span style="color:#00a">New</span> York Knicks <span style="color:#aaa;font-style:italic">-- 97
</span><span style="color:#aaa;font-style:italic"></span>guest      | Cleveland Cavaliers <span style="color:#aaa;font-style:italic">-- 101
</span><span style="color:#aaa;font-style:italic"></span>winner_trb | <span style="color:#099">21</span>
-[ RECORD <span style="color:#099">3</span> ]<span style="color:#aaa;font-style:italic">--------------------------
</span><span style="color:#aaa;font-style:italic"></span><span style="color:#0aa">date</span>       | <span style="color:#099">2007</span>-<span style="color:#099">01</span>-<span style="color:#099">29</span>
<span style="color:#00a">host</span>       | Utah Jazz <span style="color:#aaa;font-style:italic">-- 115
</span><span style="color:#aaa;font-style:italic"></span>guest      | <span style="color:#00a">New</span> Jersey Nets <span style="color:#aaa;font-style:italic">-- 116
</span><span style="color:#aaa;font-style:italic"></span>winner_trb | <span style="color:#099">21</span>

Time: <span style="color:#099">127</span>.<span style="color:#099">771</span> ms</code></pre></div>
<p>Again it&rsquo;s easy enough in SQL to have more details about the
<em>aside</em> presented
in our source article, and we get a slightly different story.</p>

<h1 id="conclusion">Conclusion</h1>

<p>It&rsquo;s quite hard for me to appreciate the work done in the
<em>MongoDB
aggregation framework</em> really, when we&rsquo;ve been enjoying advanced aggregation
and statistics in
<a href="http://www.postgresql.org/">PostgreSQL</a> for a very long time. With the addition of
<a href="http://www.postgresql.org/docs/9.3/static/tutorial-window.html">Window Functions</a> and
<a href="http://www.postgresql.org/docs/9.3/static/functions-aggregate.html#FUNCTIONS-AGGREGATE-STATISTICS-TABLE">Aggregate Functions for Statistics</a> it&rsquo;s possible to
implement advanced analysis right into your SQL queries.</p>




<div class="figure fig25 right dim-margin" >
  
    <img class="fig-img" src="/img/old/sql-logo.png"  alt="PostgreSQL is YeSQL">
  
   
    <span class="caption">PostgreSQL is YeSQL</span>
  
</div>


<p>In next PostgreSQL release the set of analytical functions is going to
expand again with the addition of both
<a href="http://www.postgresql.org/docs/devel/static/functions-aggregate.html#FUNCTIONS-ORDEREDSET-TABLE">Ordered-Set Aggregate Functions</a> (also
known as
<em>inverse distribution</em> functions) and
<a href="http://www.postgresql.org/docs/devel/static/functions-aggregate.html#FUNCTIONS-HYPOTHETICAL-TABLE">Hypothetical-Set Aggregate Functions</a> (also known as
<code>WITHIN GROUP</code>).</p>

<p>When the problem you have to solve involves analyzing data, one of the more
advanced tooling you can find around certainly is the SQL language, in
particular its implementation in PostgreSQL!</p>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small"></span><br/>
                    
  <a class="tag tag--primary tag--small" href="/tags/postgresql/">PostgreSQL</a>

  <a class="tag tag--primary tag--small" href="/tags/mongodb/">MongoDB</a>

  <a class="tag tag--primary tag--small" href="/tags/yesql/">YeSQL</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  <div class="post-footer-tags">
    
    <script async id="_ck_252762" src="https://forms.convertkit.com/252762?v=6"></script>
    
  </div>
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2014/02/postgresql-aggregates-and-histograms/" data-tooltip="PostgreSQL, Aggregates and Histograms">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2014/02/postgresql-fosdem-conference/" data-tooltip="PostgreSQL FOSDEM Conference">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https%3a%2f%2ftapoueh.org%2fblog%2f2014%2f02%2faggregating-nba-data-postgresql-vs-mongodb%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftapoueh.org%2fblog%2f2014%2f02%2faggregating-nba-data-postgresql-vs-mongodb%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Aggregating%20NBA%20data%2c%20PostgreSQL%20vs%20MongoDB with @tapoueh: https%3a%2f%2ftapoueh.org%2fblog%2f2014%2f02%2faggregating-nba-data-postgresql-vs-mongodb%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#table-of-contents">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Dimitri Fontaine. 
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        <div class="post-actions-wrap">
  <div class="post-footer-tags">
    
    <script async id="_ck_252762" src="https://forms.convertkit.com/252762?v=6"></script>
    
  </div>
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2014/02/postgresql-aggregates-and-histograms/" data-tooltip="PostgreSQL, Aggregates and Histograms">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml"></span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="/blog/2014/02/postgresql-fosdem-conference/" data-tooltip="PostgreSQL FOSDEM Conference">
          
            <span class="hide-xs hide-sm text-small icon-mr"></span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https%3a%2f%2ftapoueh.org%2fblog%2f2014%2f02%2faggregating-nba-data-postgresql-vs-mongodb%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftapoueh.org%2fblog%2f2014%2f02%2faggregating-nba-data-postgresql-vs-mongodb%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=Aggregating%20NBA%20data%2c%20PostgreSQL%20vs%20MongoDB with @tapoueh: https%3a%2f%2ftapoueh.org%2fblog%2f2014%2f02%2faggregating-nba-data-postgresql-vs-mongodb%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#table-of-contents">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3a%2f%2ftapoueh.org%2fblog%2f2014%2f02%2faggregating-nba-data-postgresql-vs-mongodb%2f">
        <i class="fa fa-google-plus"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftapoueh.org%2fblog%2f2014%2f02%2faggregating-nba-data-postgresql-vs-mongodb%2f">
        <i class="fa fa-facebook-official"></i><span></span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=Aggregating%20NBA%20data%2c%20PostgreSQL%20vs%20MongoDB with @tapoueh: https%3a%2f%2ftapoueh.org%2fblog%2f2014%2f02%2faggregating-nba-data-postgresql-vs-mongodb%2f">
        <i class="fa fa-twitter"></i><span></span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>

    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/7b615d104c506aa0a49e17151fa94d9f?s=110" alt="" />
    
    <h4 id="about-card-name">Dimitri Fontaine</h4>
    
      <div id="about-card-bio">PostgreSQL Major Contributor</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Open Source Software Engineer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        France
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center"></div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://tapoueh.org/blog/2018/04/postgresql-data-types-json/">
                <h3 class="media-heading">PostgreSQL Data Types: JSON</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Continuing our series of <a href="/tags/data-types/">PostgreSQL Data Types</a> today
we&rsquo;re going to introduce the PostgreSQL JSON type.</p>

<p>PostgreSQL has built-in support for JSON with a great range of processing
functions and operators, and complete indexing support. The documentation
covers all the details in the chapters entitled <a href="https://www.postgresql.org/docs/current/static/datatype-json.html">JSON
Types</a>
and <a href="https://www.postgresql.org/docs/current/static/functions-json.html">JSON Functions and
Operators</a>.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://tapoueh.org/blog/2018/04/postgresql-data-types-xml/">
                <h3 class="media-heading">PostgreSQL Data Types: XML</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Continuing our series of <a href="/tags/data-types/">PostgreSQL Data Types</a> today
we&rsquo;re going to introduce the PostgreSQL XML type.</p>

<p>The SQL standard includes a <a href="https://en.wikipedia.org/wiki/SQL/XML">SQL/XML</a>
which <em>introduces the predefined data type XML together with constructors,
several routines, functions, and XML-to-SQL data type mappings to support
manipulation and storage of XML in a SQL database</em>, as per the Wikipedia
page.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://tapoueh.org/blog/2018/04/postgresql-data-types-arrays/">
                <h3 class="media-heading">PostgreSQL Data Types: Arrays</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Continuing our series of <a href="/tags/data-types/">PostgreSQL Data Types</a> today
we&rsquo;re going to introduce the PostgreSQL array data types.</p>

<p>Arrays can be used to denormalize data and avoid lookup tables. A good rule
of thumb for using them that way is that you mostly use the array as a
whole, even if you might at times search for elements in the array. Heavier
processing is going to be more complex than a lookup table.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://tapoueh.org/blog/2018/04/postgresql-data-types-ranges/">
                <h3 class="media-heading">PostgreSQL Data Types: Ranges</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Continuing our series of <a href="/tags/data-types/">PostgreSQL Data Types</a> today
we&rsquo;re going to introduce the PostgreSQL ranges data type.</p>

<p>Range types are a unique feature of PostgreSQL, managing two dimensions of
data in a single column, and allowing advanced processing. The main example
is the <em>daterange</em> data type, which stores as a single value a lower and an
upper bound of the range as a single value. This allows PostgreSQL to
implement a concurrent safe check against <em>overlapping</em> ranges, as we&rsquo;re
going to see in this article.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://tapoueh.org/blog/2018/04/postgresql-data-types-network-addresses/">
                <h3 class="media-heading">PostgreSQL Data Types: Network Addresses</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Continuing our series of <a href="/tags/data-types/">PostgreSQL Data Types</a> today
we&rsquo;re going to introduce network address types.</p>

<p>PostgreSQL includes support for both <em>cidr</em>, <em>inet</em>, and <em>macaddr</em> data
types. Again, those types are bundled with indexing support and advanced
functions and operator support.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://tapoueh.org/blog/2018/04/postgresql-data-types-date-and-time-processing/">
                <h3 class="media-heading">PostgreSQL Data Types: Date and Time Processing</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Continuing our series of <a href="/tags/data-types/">PostgreSQL Data Types</a> today
we&rsquo;re going to introduce date and time based processing functions.</p>

<p>Once the application&rsquo;s data, or rather the user data is properly stored as
timestamp with time zone, PostgreSQL allows implementing all the processing
you need to. In this article we dive into a set of examples to help you get
started with time based processing in your database. Can we boost your
reporting skills?</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://tapoueh.org/blog/2018/04/postgresql-data-types-text-processing/">
                <h3 class="media-heading">PostgreSQL Data Types: Text Processing</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Continuing our series of <a href="/tags/data-types/">PostgreSQL Data Types</a> today
we&rsquo;re going to introduce some of the PostgreSQL text processing functions.</p>

<p>There&rsquo;s a very rich set of PostgreSQL functions to process text — you can
find them all in the <a href="https://www.postgresql.org/docs/current/static/functions-string.html">string functions and
operators</a>
documentation chapter — with functions such as <em>overlay()</em>, <em>substring()</em>,
<em>position()</em> or <em>trim()</em>. Or aggregates such as <em>string_agg()</em>. There are
also <em>regular expression</em> functions, including the very powerful
<em>regexp_split_to_table()</em>. In this article we see practical example putting
them in practice.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://tapoueh.org/blog/2018/04/postgresql-data-types-text-encoding/">
                <h3 class="media-heading">PostgreSQL Data Types: Text Encoding</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Continuing our series of <a href="/tags/data-types/">PostgreSQL Data Types</a> today
we&rsquo;re going to introduce the PostgreSQL text data type. The first notion to
understand when processing text in any program is of course the notion of
encoding.</p>

<p>So when addressing the text datatype we must mention encoding settings, and
possibly also issues. An encoding is a particular representation of
characters in bits and bytes. In the ASCII encoding the letter <code>A</code> is
encoded as the 7-bits byte <code>1000001</code>, or 65 in decimal, or 41 in
hexadecimal. All those numbers are going to be written the same way on-disk,
and the letter <code>A</code> too.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://tapoueh.org/blog/2018/04/postgresql-data-types-an-intro/">
                <h3 class="media-heading">PostgreSQL Data Types: an intro</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Apr 4, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Today, we&rsquo;re going to begin a dive into the PostgreSQL Data Types. As my
colleague <a href="https://bitfission.com">Will Leinweber</a> said recently in his talk
<a href="https://www.postgresql.eu/events/pgdayparis2018/schedule/session/1835-constraints-a-developers-secret-weapon/">Constraints: a Developer&rsquo;s Secret
Weapon</a>
that he gave at <a href="https://2018.pgday.paris">pgDay Paris</a>: <a href="https://www.citusdata.com/blog/2018/03/19/postgres-database-constraints/">database
constraints in Postgres are the last line of
defense</a>.</p>

<p>The most important of those constraints is the data type, or the <em>attribute
domain</em> in normalization slang. By declaring an attribute to be of a certain
data type, then PostgreSQL ensures that this property is always true, and
then implements advanced processing features for each data type, so that you
may push the computation to the data, when needed.</p>

<p>This article is the first of a series that will go through many of the
PostgreSQL data types, and we open the journey with <code>boolean</code>.</p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://tapoueh.org/blog/2018/03/object-relational-database-management-system/">
                <h3 class="media-heading">Object Relational Database Management System</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Mar 3, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p><a href="https://www.postgresql.org">PostgreSQL</a> is the world&rsquo;s most advanced open
source database, and per the <a href="https://en.wikipedia.org/wiki/PostgreSQL">PostgreSQL Wikipedia
page</a> it is <em>an
<strong>object-relational</strong> database management system (ORDBMS) with an emphasis
on extensibility and standards compliance</em>.</p>

<p>In this article, we try to understand why would PostgreSQL be named an
<em>object-relational</em> thing. What is Object Oriented Programming and how does
that apply to a database system?</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero=""
         data-message-one=""
         data-message-other="">
         270 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('https://tapoueh.org/images/mayan-calendar.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="/js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/tapoueh.org\/blog\/2014\/02\/aggregating-nba-data-postgresql-vs-mongodb\/';
          
            this.page.identifier = '\/blog\/2014\/02\/aggregating-nba-data-postgresql-vs-mongodb\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'tapoueh';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  



    
  </body>
</html>

